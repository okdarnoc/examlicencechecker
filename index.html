<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SFC Exam & Eligibility Checker | è­‰ç›£æœƒè€ƒè©¦åŠè³‡æ ¼æª¢æŸ¥å™¨</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+TC:wght@400;500;700&family=Noto+Sans+SC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #ED1C24;
            --primary-dark: #C41920;
            --secondary: #1a1a2e;
            --success: #28a745;
            --warning: #ffc107;
            --danger: #dc3545;
            --white: #ffffff;
            --gray-100: #f1f3f5;
            --gray-200: #e9ecef;
            --gray-300: #dee2e6;
            --gray-600: #6c757d;
            --gray-800: #343a40;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: 'Inter', sans-serif; background: var(--gray-100); color: var(--gray-800); line-height: 1.6; }
        .container { max-width: 900px; margin: 0 auto; padding: 0 20px; }

        /* Language Bar */
        .lang-bar { background: var(--secondary); padding: 10px 0; }
        .lang-selector { display: flex; justify-content: flex-end; gap: 5px; }
        .lang-btn { background: transparent; border: 1px solid rgba(255,255,255,0.3); color: rgba(255,255,255,0.8); padding: 6px 14px; border-radius: 4px; cursor: pointer; font-size: 0.85rem; }
        .lang-btn:hover { background: rgba(255,255,255,0.1); }
        .lang-btn.active { background: var(--primary); border-color: var(--primary); color: white; }

        /* Header */
        .header { background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%); color: white; padding: 25px 0; }
        .header-content { display: flex; align-items: center; gap: 20px; }
        .logo { width: 70px; height: auto; border-radius: 8px; background: white; padding: 5px; }
        .header h1 { font-size: 1.6rem; margin-bottom: 5px; }
        .header p { opacity: 0.9; font-size: 0.95rem; }

        /* Main */
        .main-content { padding: 30px 0 50px; }
        .card { background: white; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); margin-bottom: 20px; overflow: hidden; }
        .card-header { background: var(--gray-100); padding: 20px 25px; border-bottom: 1px solid var(--gray-200); }
        .card-header h2 { color: var(--secondary); font-size: 1.3rem; margin-bottom: 5px; }
        .card-header p { color: var(--gray-600); font-size: 0.9rem; }
        .card-body { padding: 25px; }
        .card-footer { padding: 15px 25px; background: var(--gray-100); border-top: 1px solid var(--gray-200); display: flex; justify-content: space-between; gap: 10px; }

        /* Form */
        .form-group { margin-bottom: 25px; }
        .form-group:last-child { margin-bottom: 0; }
        .form-group > label { display: block; font-weight: 600; margin-bottom: 10px; }

        /* Radio/Checkbox Cards */
        .option-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 10px; }
        .option-card { cursor: pointer; display: flex; }
        .option-card input { display: none; }
        .option-content { background: white; border: 2px solid var(--gray-300); border-radius: 8px; padding: 15px; transition: all 0.2s; text-align: center; width: 100%; min-height: 95px; display: flex; flex-direction: column; justify-content: center; align-items: center; }
        .option-card:hover .option-content { border-color: var(--primary); }
        .option-card input:checked + .option-content { border-color: var(--primary); background: #fff5f5; box-shadow: 0 0 0 3px rgba(237,28,36,0.1); }
        .option-type { display: block; font-size: 0.7rem; font-weight: 700; color: var(--primary); text-transform: uppercase; margin-bottom: 5px; }
        .option-name { display: block; font-size: 0.85rem; font-weight: 500; color: var(--secondary); }
        .option-detail { display: block; font-size: 0.75rem; color: var(--gray-600); margin-top: 3px; }
        .option-badge { display: inline-block; margin-top: 5px; padding: 2px 8px; background: var(--success); color: white; font-size: 0.65rem; border-radius: 4px; }
        .option-badge.new { background: #17a2b8; }

        /* Toggle */
        .toggle-grid { display: flex; gap: 15px; }
        .toggle-card { flex: 1; cursor: pointer; }
        .toggle-card input { display: none; }
        .toggle-content { background: white; border: 2px solid var(--gray-300); border-radius: 8px; padding: 15px; text-align: center; transition: all 0.2s; }
        .toggle-card:hover .toggle-content { border-color: var(--gray-600); }
        .toggle-card input:checked + .toggle-content { border-color: var(--primary); background: #fff5f5; }

        /* Select */
        select { width: 100%; padding: 12px; border: 2px solid var(--gray-300); border-radius: 8px; font-size: 1rem; background: white; }
        select:focus { outline: none; border-color: var(--primary); }

        /* Input */
        .input-row { display: flex; align-items: center; gap: 10px; margin-bottom: 10px; }
        .input-row input { flex: 1; padding: 10px; border: 2px solid var(--gray-300); border-radius: 8px; font-size: 1rem; }
        .input-row input:focus { outline: none; border-color: var(--primary); }
        .input-row .unit { color: var(--gray-600); }
        .help-text { font-size: 0.8rem; color: var(--gray-600); }

        /* Checkbox Grid */
        .checkbox-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); gap: 8px; }
        .checkbox-item { display: flex; align-items: center; gap: 8px; padding: 8px 12px; background: white; border: 2px solid var(--gray-300); border-radius: 6px; cursor: pointer; font-size: 0.85rem; }
        .checkbox-item:hover { border-color: var(--gray-600); }
        .checkbox-item input { width: 16px; height: 16px; accent-color: var(--primary); }

        /* License with Role Selection */
        .license-grid { display: flex; flex-direction: column; gap: 8px; }
        .license-row { display: flex; align-items: center; gap: 10px; padding: 10px 12px; background: white; border: 2px solid var(--gray-300); border-radius: 6px; flex-wrap: wrap; }
        .license-row:hover { border-color: var(--gray-600); }
        .license-row.selected { border-color: var(--primary); background: #fff5f5; }
        .license-row input[type="checkbox"] { width: 16px; height: 16px; accent-color: var(--primary); cursor: pointer; }
        .license-row .ra-label { font-size: 0.85rem; font-weight: 500; min-width: 55px; cursor: pointer; }
        .role-toggle { display: none; margin-left: auto; gap: 5px; align-items: center; }
        .license-row.selected .role-toggle { display: flex; }
        .role-toggle label { display: flex; align-items: center; gap: 3px; padding: 4px 10px; background: var(--gray-100); border: 1px solid var(--gray-300); border-radius: 4px; cursor: pointer; font-size: 0.75rem; font-weight: 500; transition: all 0.2s; }
        .role-toggle input { display: none; }
        .role-toggle input:checked + span { background: var(--primary); color: white; }
        .role-toggle label:has(input:checked) { background: var(--primary); color: white; border-color: var(--primary); }

        /* Conditional Fields */
        .conditional-field { margin-top: 15px; padding: 15px; background: #f8f9fa; border-radius: 8px; border-left: 3px solid var(--primary); }
        .conditional-field.hidden { display: none; }
        .field-row { display: flex; align-items: center; gap: 15px; margin-bottom: 10px; flex-wrap: wrap; }
        .field-row:last-child { margin-bottom: 0; }
        .field-row label { font-weight: 500; font-size: 0.9rem; min-width: 200px; }
        .field-row input[type="number"] { width: 80px; padding: 8px; border: 2px solid var(--gray-300); border-radius: 6px; font-size: 0.9rem; }
        .field-row .unit { color: var(--gray-600); font-size: 0.85rem; }
        .mini-toggle { display: flex; gap: 5px; }
        .mini-toggle label { padding: 6px 12px; background: white; border: 1px solid var(--gray-300); border-radius: 4px; cursor: pointer; font-size: 0.8rem; transition: all 0.2s; }
        .mini-toggle input { display: none; }
        .mini-toggle label:has(input:checked) { background: var(--primary); color: white; border-color: var(--primary); }

        /* Info Box */
        .info-box { display: flex; gap: 10px; padding: 12px; background: #e3f2fd; border-radius: 8px; margin-top: 15px; border-left: 4px solid #2196f3; }
        .info-box.warning { background: #fff8e1; border-left-color: var(--warning); }
        .info-box p { font-size: 0.85rem; color: var(--gray-800); }

        /* Buttons */
        .btn { display: inline-block; padding: 12px 24px; font-size: 1rem; font-weight: 600; border: none; border-radius: 8px; cursor: pointer; transition: all 0.2s; }
        .btn-primary { background: var(--primary); color: white; }
        .btn-primary:hover { background: var(--primary-dark); }
        .btn-secondary { background: white; color: var(--gray-800); border: 2px solid var(--gray-300); }
        .btn-secondary:hover { background: var(--gray-100); }
        .btn-success { background: var(--success); color: white; }
        .btn-success:hover { background: #218838; }

        /* Steps */
        .step { display: none; }
        .step.active { display: block; }

        /* Results */
        .result-box { padding: 20px; border-radius: 8px; margin-bottom: 15px; }
        .result-box.success { background: #d4edda; border: 1px solid #c3e6cb; }
        .result-box.warning { background: #fff3cd; border: 1px solid #ffeeba; }
        .result-box.danger { background: #f8d7da; border: 1px solid #f5c6cb; }
        .result-box.info { background: #d1ecf1; border: 1px solid #bee5eb; }
        .result-box h3 { margin-bottom: 10px; display: flex; align-items: center; gap: 10px; }
        .result-list { list-style: none; }
        .result-list li { padding: 12px; background: white; margin-bottom: 8px; border-radius: 6px; display: flex; justify-content: space-between; align-items: center; border-left: 4px solid var(--primary); }
        .result-list li.exempt { border-left-color: var(--success); background: #f0fff4; }
        .badge { padding: 4px 10px; border-radius: 20px; font-size: 0.7rem; font-weight: 600; }
        .badge-danger { background: var(--danger); color: white; }
        .badge-success { background: var(--success); color: white; }

        /* Footer */
        .footer { background: var(--secondary); color: rgba(255,255,255,0.8); padding: 30px 0; margin-top: 40px; }
        .footer h4 { color: white; margin-bottom: 10px; }
        .footer a { color: rgba(255,255,255,0.8); }
        .footer a:hover { color: var(--primary); }

        @media (max-width: 600px) {
            .header-content { flex-direction: column; text-align: center; }
            .option-grid { grid-template-columns: repeat(2, 1fr); }
            .card-footer { flex-direction: column; }
            .card-footer .btn { width: 100%; }
        }
    </style>
</head>
<body>
    <div class="lang-bar">
        <div class="container">
            <div class="lang-selector">
                <button class="lang-btn" onclick="setLang('en')" id="lang_en">English</button>
                <button class="lang-btn active" onclick="setLang('tc')" id="lang_tc">ç¹é«”ä¸­æ–‡</button>
                <button class="lang-btn" onclick="setLang('sc')" id="lang_sc">ç®€ä½“ä¸­æ–‡</button>
            </div>
        </div>
    </div>

    <header class="header">
        <div class="container">
            <div class="header-content">
                <img src="2cexam_logo-272x300.png" alt="2CExam" class="logo">
                <div>
                    <h1 id="title">è­‰ç›£æœƒè€ƒè©¦åŠè³‡æ ¼æª¢æŸ¥å™¨</h1>
                    <p id="subtitle">æ ¹æ“šè­‰ç›£æœƒã€Šå‹ä»»èƒ½åŠ›çš„æŒ‡å¼•ã€‹(2024å¹´10æœˆ) ç¢ºå®šè€ƒè©¦è¦æ±‚åŠç‰Œç…§è³‡æ ¼</p>
                </div>
            </div>
        </div>
    </header>

    <main class="main-content">
        <div class="container">
            <!-- Step 1 -->
            <div class="step active" id="step1">
                <div class="card">
                    <div class="card-header">
                        <h2 id="s1_title">ç¬¬ä¸€æ­¥ï¼šè§’è‰²åŠå—è¦ç®¡æ´»å‹•</h2>
                        <p id="s1_desc">é¸æ“‡æ‚¨ç”³è«‹çš„è§’è‰²åŠå—è¦ç®¡æ´»å‹•é¡å‹ã€‚</p>
                    </div>
                    <div class="card-body">
                        <div class="form-group">
                            <label id="role_label">æ‚¨ç”³è«‹çš„æ˜¯ä»€éº¼è§’è‰²ï¼Ÿ</label>
                            <div class="toggle-grid">
                                <label class="toggle-card">
                                    <input type="radio" name="role" value="LR">
                                    <div class="toggle-content">
                                        <div>ğŸ‘¤</div>
                                        <strong id="role_lr">æŒç‰Œä»£è¡¨ (LR)</strong>
                                    </div>
                                </label>
                                <label class="toggle-card">
                                    <input type="radio" name="role" value="RO">
                                    <div class="toggle-content">
                                        <div>ğŸ‘”</div>
                                        <strong id="role_ro">è² è²¬äººå“¡ (RO)</strong>
                                    </div>
                                </label>
                            </div>
                        </div>
                        <div class="form-group">
                            <label id="ra_label">å“ªç¨®å—è¦ç®¡æ´»å‹• (RA)ï¼Ÿ</label>
                            <div class="option-grid">
                                <label class="option-card"><input type="radio" name="raType" value="1"><div class="option-content"><span class="option-type" id="type1">ç¬¬1é¡</span><span class="option-name" id="ra1">è­‰åˆ¸äº¤æ˜“</span></div></label>
                                <label class="option-card"><input type="radio" name="raType" value="2"><div class="option-content"><span class="option-type" id="type2">ç¬¬2é¡</span><span class="option-name" id="ra2">æœŸè²¨åˆç´„äº¤æ˜“</span></div></label>
                                <label class="option-card"><input type="radio" name="raType" value="3"><div class="option-content"><span class="option-type" id="type3">ç¬¬3é¡</span><span class="option-name" id="ra3">æ§“æ¡¿å¼å¤–åŒ¯äº¤æ˜“</span></div></label>
                                <label class="option-card"><input type="radio" name="raType" value="4"><div class="option-content"><span class="option-type" id="type4">ç¬¬4é¡</span><span class="option-name" id="ra4">å°±è­‰åˆ¸æä¾›æ„è¦‹</span></div></label>
                                <label class="option-card"><input type="radio" name="raType" value="5"><div class="option-content"><span class="option-type" id="type5">ç¬¬5é¡</span><span class="option-name" id="ra5">å°±æœŸè²¨åˆç´„æä¾›æ„è¦‹</span></div></label>
                                <label class="option-card"><input type="radio" name="raType" value="6"><div class="option-content"><span class="option-type" id="type6">ç¬¬6é¡</span><span class="option-name" id="ra6">å°±æ©Ÿæ§‹èè³‡æä¾›æ„è¦‹</span></div></label>
                                <label class="option-card"><input type="radio" name="raType" value="7"><div class="option-content"><span class="option-type" id="type7">ç¬¬7é¡</span><span class="option-name" id="ra7">æä¾›è‡ªå‹•åŒ–äº¤æ˜“æœå‹™</span><span class="option-badge" id="no_exam">ç„¡é ˆè€ƒè©¦</span></div></label>
                                <label class="option-card"><input type="radio" name="raType" value="8"><div class="option-content"><span class="option-type" id="type8">ç¬¬8é¡</span><span class="option-name" id="ra8">æä¾›è­‰åˆ¸ä¿è­‰é‡‘èè³‡</span></div></label>
                                <label class="option-card"><input type="radio" name="raType" value="9"><div class="option-content"><span class="option-type" id="type9">ç¬¬9é¡</span><span class="option-name" id="ra9">è³‡ç”¢ç®¡ç†</span></div></label>
                                <label class="option-card"><input type="radio" name="raType" value="10"><div class="option-content"><span class="option-type" id="type10">ç¬¬10é¡</span><span class="option-name" id="ra10">æä¾›ä¿¡è²¸è©•ç´šæœå‹™</span></div></label>
                                <label class="option-card"><input type="radio" name="raType" value="13"><div class="option-content"><span class="option-type" id="type13">ç¬¬13é¡</span><span class="option-name" id="ra13">ç‚ºé›†é«”æŠ•è³‡è¨ˆåŠƒæä¾›å­˜ç®¡æœå‹™</span><span class="option-badge new" id="new_2024">2024æ–°å¢</span></div></label>
                            </div>
                        </div>
                    </div>
                    <div class="card-footer">
                        <div></div>
                        <button class="btn btn-primary" onclick="nextStep(1)" id="btn_next1">ä¸‹ä¸€æ­¥ â†’</button>
                    </div>
                </div>
            </div>

            <!-- Step 2 -->
            <div class="step" id="step2">
                <div class="card">
                    <div class="card-header">
                        <h2 id="s2_title">ç¬¬äºŒæ­¥ï¼šç‰Œç…§ç´€éŒ„</h2>
                        <p id="s2_desc">æ‚¨çš„ç‰Œç…§ç´€éŒ„æœƒå½±éŸ¿è€ƒè©¦è±å…ã€‚</p>
                    </div>
                    <div class="card-body">
                        <div class="form-group">
                            <label id="current_license">æ‚¨ç›®å‰æ˜¯å¦æŒæœ‰è­‰ç›£æœƒç‰Œç…§ï¼Ÿ</label>
                            <div class="toggle-grid">
                                <label class="toggle-card"><input type="radio" name="currentLicense" value="yes"><div class="toggle-content"><strong id="yes1">æ˜¯</strong></div></label>
                                <label class="toggle-card"><input type="radio" name="currentLicense" value="no" checked><div class="toggle-content"><strong id="no1">å¦</strong></div></label>
                            </div>
                        </div>
                        <div class="form-group" id="currentRAGroup" style="display:none;">
                            <label id="current_ra_label">ç›®å‰æŒæœ‰çš„ç‰Œç…§ï¼š</label>
                            <div class="license-grid" id="currentLicenseGrid">
                                <div class="license-row" data-ra="1">
                                    <input type="checkbox" name="currentRA" value="1" id="currentRA1">
                                    <span class="ra-label" id="curr_type1">ç¬¬1é¡</span>
                                    <div class="role-toggle">
                                        <label><input type="radio" name="currentRole1" value="LR" checked><span id="curr_lr1">LR</span></label>
                                        <label><input type="radio" name="currentRole1" value="RO"><span id="curr_ro1">RO</span></label>
                                    </div>
                                </div>
                                <div class="license-row" data-ra="2">
                                    <input type="checkbox" name="currentRA" value="2" id="currentRA2">
                                    <span class="ra-label" id="curr_type2">ç¬¬2é¡</span>
                                    <div class="role-toggle">
                                        <label><input type="radio" name="currentRole2" value="LR" checked><span>LR</span></label>
                                        <label><input type="radio" name="currentRole2" value="RO"><span>RO</span></label>
                                    </div>
                                </div>
                                <div class="license-row" data-ra="4">
                                    <input type="checkbox" name="currentRA" value="4" id="currentRA4">
                                    <span class="ra-label" id="curr_type4">ç¬¬4é¡</span>
                                    <div class="role-toggle">
                                        <label><input type="radio" name="currentRole4" value="LR" checked><span>LR</span></label>
                                        <label><input type="radio" name="currentRole4" value="RO"><span>RO</span></label>
                                    </div>
                                </div>
                                <div class="license-row" data-ra="5">
                                    <input type="checkbox" name="currentRA" value="5" id="currentRA5">
                                    <span class="ra-label" id="curr_type5">ç¬¬5é¡</span>
                                    <div class="role-toggle">
                                        <label><input type="radio" name="currentRole5" value="LR" checked><span>LR</span></label>
                                        <label><input type="radio" name="currentRole5" value="RO"><span>RO</span></label>
                                    </div>
                                </div>
                                <div class="license-row" data-ra="6">
                                    <input type="checkbox" name="currentRA" value="6" id="currentRA6">
                                    <span class="ra-label" id="curr_type6">ç¬¬6é¡</span>
                                    <div class="role-toggle">
                                        <label><input type="radio" name="currentRole6" value="LR" checked><span>LR</span></label>
                                        <label><input type="radio" name="currentRole6" value="RO"><span>RO</span></label>
                                    </div>
                                </div>
                                <div class="license-row" data-ra="8">
                                    <input type="checkbox" name="currentRA" value="8" id="currentRA8">
                                    <span class="ra-label" id="curr_type8">ç¬¬8é¡</span>
                                    <div class="role-toggle">
                                        <label><input type="radio" name="currentRole8" value="LR" checked><span>LR</span></label>
                                        <label><input type="radio" name="currentRole8" value="RO"><span>RO</span></label>
                                    </div>
                                </div>
                                <div class="license-row" data-ra="9">
                                    <input type="checkbox" name="currentRA" value="9" id="currentRA9">
                                    <span class="ra-label" id="curr_type9">ç¬¬9é¡</span>
                                    <div class="role-toggle">
                                        <label><input type="radio" name="currentRole9" value="LR" checked><span>LR</span></label>
                                        <label><input type="radio" name="currentRole9" value="RO"><span>RO</span></label>
                                    </div>
                                </div>
                                <div class="license-row" data-ra="10">
                                    <input type="checkbox" name="currentRA" value="10" id="currentRA10">
                                    <span class="ra-label" id="curr_type10">ç¬¬10é¡</span>
                                    <div class="role-toggle">
                                        <label><input type="radio" name="currentRole10" value="LR" checked><span>LR</span></label>
                                        <label><input type="radio" name="currentRole10" value="RO"><span>RO</span></label>
                                    </div>
                                </div>
                                <div class="license-row" data-ra="13">
                                    <input type="checkbox" name="currentRA" value="13" id="currentRA13">
                                    <span class="ra-label" id="curr_type13">ç¬¬13é¡</span>
                                    <div class="role-toggle">
                                        <label><input type="radio" name="currentRole13" value="LR" checked><span>LR</span></label>
                                        <label><input type="radio" name="currentRole13" value="RO"><span>RO</span></label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="form-group" id="formerGroup">
                            <label id="former_license">æ‚¨éå»æ˜¯å¦æ›¾æŒæœ‰ç‰Œç…§ï¼Ÿ</label>
                            <div class="toggle-grid">
                                <label class="toggle-card"><input type="radio" name="formerLicense" value="yes"><div class="toggle-content"><strong id="yes2">æ˜¯</strong></div></label>
                                <label class="toggle-card"><input type="radio" name="formerLicense" value="no" checked><div class="toggle-content"><strong id="no2">å¦</strong></div></label>
                            </div>
                        </div>
                        <div class="form-group" id="yearsAbsentGroup" style="display:none;">
                            <label id="years_absent">é›¢é–‹è¡Œæ¥­å¤šé•·æ™‚é–“ï¼š</label>
                            <div class="input-row">
                                <input type="number" id="yearsAbsent" min="0" max="50" step="0.5" value="0">
                                <span class="unit" id="years_unit">å¹´</span>
                            </div>
                            <p class="help-text" id="years_help">3-8å¹´ = éœ€è¦CPTæ™‚æ•¸ï¼›>8å¹´ = æ²’æœ‰è±å…</p>
                        </div>
                        <div class="form-group" id="formerRAGroup" style="display:none;">
                            <label id="former_ra_label">éå»æŒæœ‰çš„ç‰Œç…§ï¼š</label>
                            <div class="license-grid" id="formerLicenseGrid">
                                <div class="license-row" data-ra="1">
                                    <input type="checkbox" name="formerRA" value="1" id="formerRA1">
                                    <span class="ra-label" id="former_type1">ç¬¬1é¡</span>
                                    <div class="role-toggle">
                                        <label><input type="radio" name="formerRole1" value="LR" checked><span>LR</span></label>
                                        <label><input type="radio" name="formerRole1" value="RO"><span>RO</span></label>
                                    </div>
                                </div>
                                <div class="license-row" data-ra="2">
                                    <input type="checkbox" name="formerRA" value="2" id="formerRA2">
                                    <span class="ra-label" id="former_type2">ç¬¬2é¡</span>
                                    <div class="role-toggle">
                                        <label><input type="radio" name="formerRole2" value="LR" checked><span>LR</span></label>
                                        <label><input type="radio" name="formerRole2" value="RO"><span>RO</span></label>
                                    </div>
                                </div>
                                <div class="license-row" data-ra="4">
                                    <input type="checkbox" name="formerRA" value="4" id="formerRA4">
                                    <span class="ra-label" id="former_type4">ç¬¬4é¡</span>
                                    <div class="role-toggle">
                                        <label><input type="radio" name="formerRole4" value="LR" checked><span>LR</span></label>
                                        <label><input type="radio" name="formerRole4" value="RO"><span>RO</span></label>
                                    </div>
                                </div>
                                <div class="license-row" data-ra="5">
                                    <input type="checkbox" name="formerRA" value="5" id="formerRA5">
                                    <span class="ra-label" id="former_type5">ç¬¬5é¡</span>
                                    <div class="role-toggle">
                                        <label><input type="radio" name="formerRole5" value="LR" checked><span>LR</span></label>
                                        <label><input type="radio" name="formerRole5" value="RO"><span>RO</span></label>
                                    </div>
                                </div>
                                <div class="license-row" data-ra="6">
                                    <input type="checkbox" name="formerRA" value="6" id="formerRA6">
                                    <span class="ra-label" id="former_type6">ç¬¬6é¡</span>
                                    <div class="role-toggle">
                                        <label><input type="radio" name="formerRole6" value="LR" checked><span>LR</span></label>
                                        <label><input type="radio" name="formerRole6" value="RO"><span>RO</span></label>
                                    </div>
                                </div>
                                <div class="license-row" data-ra="8">
                                    <input type="checkbox" name="formerRA" value="8" id="formerRA8">
                                    <span class="ra-label" id="former_type8">ç¬¬8é¡</span>
                                    <div class="role-toggle">
                                        <label><input type="radio" name="formerRole8" value="LR" checked><span>LR</span></label>
                                        <label><input type="radio" name="formerRole8" value="RO"><span>RO</span></label>
                                    </div>
                                </div>
                                <div class="license-row" data-ra="9">
                                    <input type="checkbox" name="formerRA" value="9" id="formerRA9">
                                    <span class="ra-label" id="former_type9">ç¬¬9é¡</span>
                                    <div class="role-toggle">
                                        <label><input type="radio" name="formerRole9" value="LR" checked><span>LR</span></label>
                                        <label><input type="radio" name="formerRole9" value="RO"><span>RO</span></label>
                                    </div>
                                </div>
                                <div class="license-row" data-ra="10">
                                    <input type="checkbox" name="formerRA" value="10" id="formerRA10">
                                    <span class="ra-label" id="former_type10">ç¬¬10é¡</span>
                                    <div class="role-toggle">
                                        <label><input type="radio" name="formerRole10" value="LR" checked><span>LR</span></label>
                                        <label><input type="radio" name="formerRole10" value="RO"><span>RO</span></label>
                                    </div>
                                </div>
                                <div class="license-row" data-ra="13">
                                    <input type="checkbox" name="formerRA" value="13" id="formerRA13">
                                    <span class="ra-label" id="former_type13">ç¬¬13é¡</span>
                                    <div class="role-toggle">
                                        <label><input type="radio" name="formerRole13" value="LR" checked><span>LR</span></label>
                                        <label><input type="radio" name="formerRole13" value="RO"><span>RO</span></label>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Additional Step 2 Fields for Conditional Exemptions -->
                        <div class="form-group" id="additionalLicenseFields">
                            <div class="conditional-field">
                                <div class="field-row">
                                    <label id="temp_licence_label">ç”³è«‹è‡¨æ™‚ç‰Œç…§ï¼Ÿ</label>
                                    <div class="mini-toggle">
                                        <label><input type="radio" name="tempLicence" value="yes"><span id="temp_yes">æ˜¯</span></label>
                                        <label><input type="radio" name="tempLicence" value="no" checked><span id="temp_no">å¦</span></label>
                                    </div>
                                </div>
                                <p class="help-text" id="temp_licence_help" style="margin-bottom:15px;">è‡¨æ™‚ç‰Œç…§ç”³è«‹äººå¯ç²è±å…RIQåŠLRPè€ƒè©¦è¦æ±‚ï¼ˆåƒ…é©ç”¨æ–¼ç¬¬1ã€2ã€4ã€5ã€6ã€10ã€11é¡ï¼‰ã€‚è©³è¦‹ã€ŠæŒ‡å¼•ã€‹4.4.2.1(b)åŠ4.4.3.1(b)ã€‚</p>

                                <div class="field-row" id="neverAttemptedP1Row" style="display:none;">
                                    <label id="never_p1_label">å¾æœªå˜—è©¦éå·ä¸€è€ƒè©¦ï¼Ÿ</label>
                                    <div class="mini-toggle">
                                        <label><input type="radio" name="neverAttemptedP1" value="yes"><span id="never_p1_yes">æ˜¯</span></label>
                                        <label><input type="radio" name="neverAttemptedP1" value="no" checked><span id="never_p1_no">å¦</span></label>
                                    </div>
                                </div>
                                <p class="help-text" id="never_p1_help" style="margin-bottom:15px;display:none;">æ ¹æ“šã€ŠæŒ‡å¼•ã€‹4.4.3.7ï¼Œç¾æ™‚æˆ–3å¹´å…§æ›¾æŒç‰Œçš„LRè‹¥å¾æœªå˜—è©¦éå·ä¸€è€ƒè©¦ï¼Œå¯ç²æœ‰æ¢ä»¶è±å…ï¼Œä½†éœ€é¡å¤–å®Œæˆ+5 CPTå°æ™‚ï¼ˆæœ¬åœ°ç›£ç®¡çŸ¥è­˜ï¼‰ã€‚</p>

                                <div class="field-row">
                                    <label id="licensed_hk_exp_label">æŒç‰Œé¦™æ¸¯ç¶“é©—ï¼š</label>
                                    <input type="number" id="licensedHKExp" min="0" max="30" step="0.5" value="0">
                                    <span class="unit" id="years_unit5">å¹´</span>
                                </div>
                                <p class="help-text" id="licensed_hk_exp_help">åœ¨é¦™æ¸¯æŒæœ‰è­‰ç›£æœƒç‰Œç…§å¾äº‹å—è¦ç®¡æ´»å‹•çš„ç¸½å¹´è³‡ã€‚è‹¥æ‚¨ç›®å‰æŒç‰Œç‚ºLRä¸¦ç”³è«‹å‡ç´šç‚ºåŒä¸€é¡åˆ¥çš„ROï¼Œéœ€å…·å‚™3å¹´ä»¥ä¸ŠæŒç‰Œç¶“é©—æ–¹å¯ç²æœ‰æ¢ä»¶è±å…LRPè€ƒè©¦ï¼ˆã€ŠæŒ‡å¼•ã€‹4.4.3.4ï¼‰ã€‚</p>
                            </div>
                        </div>
                    </div>
                    <div class="card-footer">
                        <button class="btn btn-secondary" onclick="prevStep(2)" id="btn_back2">â† è¿”å›</button>
                        <button class="btn btn-primary" onclick="nextStep(2)" id="btn_next2">ä¸‹ä¸€æ­¥ â†’</button>
                    </div>
                </div>
            </div>

            <!-- Step 3 -->
            <div class="step" id="step3">
                <div class="card">
                    <div class="card-header">
                        <h2 id="s3_title">ç¬¬ä¸‰æ­¥ï¼šè³‡æ­·åŠç¶“é©—</h2>
                        <p id="s3_desc">æ‚¨çš„è³‡æ­·æ±ºå®šè€ƒè©¦è±å…ã€‚</p>
                    </div>
                    <div class="card-body">
                        <div class="form-group">
                            <label id="academic_label">æœ€é«˜å­¸æ­·ï¼š</label>
                            <select id="academicQual">
                                <option value="none" id="acad_none">æ²’æœ‰æ­£å¼å­¸æ­·</option>
                                <option value="secondary" id="acad_sec">ä¸­å­¸æ•™è‚² (HKCEE/HKDSE)</option>
                                <option value="degreeOther" id="acad_deg_other">å­¸å£«å­¸ä½ï¼ˆå…¶ä»–é ˜åŸŸï¼‰</option>
                                <option value="degreeRelevant" id="acad_deg_rel">æœƒè¨ˆ/å•†æ¥­/ç¶“æ¿Ÿ/é‡‘è/æ³•å¾‹å­¸å£«å­¸ä½</option>
                                <option value="degreeRelevantCourses" id="acad_deg_courses">å­¸å£«å­¸ä½ï¼ˆå…¶ä»–ï¼‰+ 2é–€ç›¸é—œèª²ç¨‹</option>
                                <option value="masters" id="acad_masters">ç›¸é—œé ˜åŸŸç¢©å£«å­¸ä½</option>
                                <option value="mba" id="acad_mba">MBA</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label id="prof_label">å°ˆæ¥­è³‡æ ¼ï¼š</label>
                            <div class="checkbox-grid">
                                <label class="checkbox-item"><input type="checkbox" name="profQual" value="CFA"><span>CFA</span></label>
                                <label class="checkbox-item"><input type="checkbox" name="profQual" value="CIIA"><span>CIIA</span></label>
                                <label class="checkbox-item"><input type="checkbox" name="profQual" value="CFP"><span>CFP</span></label>
                                <label class="checkbox-item"><input type="checkbox" name="profQual" value="FRM"><span>FRM</span></label>
                                <label class="checkbox-item"><input type="checkbox" name="profQual" value="CPA"><span>CPA</span></label>
                            </div>
                        </div>
                        <div class="form-group">
                            <label id="exp_8_label">éå»8å¹´ç›¸é—œç¶“é©—ï¼š</label>
                            <div class="input-row">
                                <input type="number" id="industryExp" min="0" max="8" step="0.5" value="0">
                                <span class="unit" id="years_unit2">å¹´</span>
                            </div>
                            <p class="help-text" id="exp_8_help">5å¹´ä»¥ä¸Š = RIQè±å…</p>
                        </div>
                        <div class="form-group">
                            <label id="exp_6_label">éå»6å¹´ç›¸é—œç¶“é©—ï¼š</label>
                            <div class="input-row">
                                <input type="number" id="industryExp6" min="0" max="6" step="0.5" value="0">
                                <span class="unit" id="years_unit3">å¹´</span>
                            </div>
                            <p class="help-text" id="exp_6_help">è² è²¬äººå“¡éœ€3å¹´ä»¥ä¸Š</p>
                        </div>
                        <div class="form-group">
                            <label id="mgmt_label">ç®¡ç†ç¶“é©—ï¼š</label>
                            <div class="input-row">
                                <input type="number" id="managementExp" min="0" max="30" step="0.5" value="0">
                                <span class="unit" id="years_unit4">å¹´</span>
                            </div>
                            <p class="help-text" id="mgmt_help">è² è²¬äººå“¡éœ€2å¹´ä»¥ä¸Š</p>
                        </div>
                        <div class="form-group">
                            <label id="pi_label">æ˜¯å¦åªæœå‹™å°ˆæ¥­æŠ•è³‡è€…ï¼Ÿ</label>
                            <div class="toggle-grid">
                                <label class="toggle-card"><input type="radio" name="piOnly" value="yes"><div class="toggle-content"><strong id="yes3">æ˜¯</strong></div></label>
                                <label class="toggle-card"><input type="radio" name="piOnly" value="no" checked><div class="toggle-content"><strong id="no3">å¦</strong></div></label>
                            </div>
                        </div>

                        <!-- Additional Fields for Conditional Exemptions (RO) -->
                        <div class="form-group" id="roConditionalFields">
                            <div class="conditional-field">
                                <p style="font-weight:600;margin-bottom:15px;color:var(--secondary);" id="ro_conditional_title">è² è²¬äººå“¡æœ‰æ¢ä»¶è±å…ç›¸é—œè³‡æ–™ï¼š</p>

                                <div class="field-row">
                                    <label id="schedule3_exp_label">é™„è¡¨3èªå¯äº¤æ˜“æ‰€å¸æ³•ç®¡è½„å€ç¶“é©—ï¼š</label>
                                    <input type="number" id="schedule3Exp" min="0" max="30" step="0.5" value="0">
                                    <span class="unit" id="years_unit6">å¹´</span>
                                </div>
                                <p class="help-text" id="schedule3_exp_help" style="margin-bottom:15px;">åœ¨ã€Šè­‰åˆ¸åŠæœŸè²¨(åœ¨è­‰åˆ¸å¸‚å ´ä¸Šå¸‚)è¦å‰‡ã€‹é™„è¡¨3æ‰€åˆ—èªå¯äº¤æ˜“æ‰€çš„å¸æ³•ç®¡è½„å€ï¼ˆå¦‚ç¾åœ‹ã€è‹±åœ‹ã€æ—¥æœ¬ã€æ¾³æ´²ã€æ–°åŠ å¡ç­‰ï¼‰å¾äº‹ç›¸é—œå—è¦ç®¡æ´»å‹•çš„ç¶“é©—å¹´è³‡ã€‚8å¹´ä»¥ä¸Šå¯ç²æœ‰æ¢ä»¶è±å…ï¼ˆã€ŠæŒ‡å¼•ã€‹4.4.3.2åŠ4.4.3.5ï¼‰ã€‚</p>

                                <div class="field-row">
                                    <label id="regulatory_work_label">éå»6å¹´å…§å…¨è·ç›£ç®¡/åˆè¦å·¥ä½œæ»¿3å¹´ï¼Ÿ</label>
                                    <div class="mini-toggle">
                                        <label><input type="radio" name="regulatoryWork" value="yes"><span id="reg_yes">æ˜¯</span></label>
                                        <label><input type="radio" name="regulatoryWork" value="no" checked><span id="reg_no">å¦</span></label>
                                    </div>
                                </div>
                                <p class="help-text" id="regulatory_work_help" style="margin-bottom:15px;">åœ¨é¦™æ¸¯å¾äº‹å…¨è·ç›£ç®¡æˆ–åˆè¦å·¥ä½œï¼ˆå¦‚åœ¨è­‰ç›£æœƒã€é‡‘ç®¡å±€ã€ä¿ç›£å±€æˆ–æŒç‰Œæ³•åœ˜çš„åˆè¦éƒ¨é–€å·¥ä½œï¼‰ã€‚ç¬¦åˆè€…å¯ç²å®Œå…¨è±å…LRPè€ƒè©¦ï¼ˆã€ŠæŒ‡å¼•ã€‹4.4.3.1(c)ï¼‰ã€‚</p>

                                <div class="field-row">
                                    <label id="limited_scope_label">æœ‰é™ç¯„åœæ´»å‹•/é«˜ç´šç®¡ç†äººå“¡è§’è‰²ï¼Ÿ</label>
                                    <div class="mini-toggle">
                                        <label><input type="radio" name="limitedScope" value="yes"><span id="scope_yes">æ˜¯</span></label>
                                        <label><input type="radio" name="limitedScope" value="no" checked><span id="scope_no">å¦</span></label>
                                    </div>
                                </div>
                                <p class="help-text" id="limited_scope_help" style="margin-bottom:15px;">æŒ‡ROåªå¾äº‹æœ‰é™ç¯„åœçš„å—è¦ç®¡æ´»å‹•ï¼ˆå¦‚åƒ…è™•ç†æ©Ÿæ§‹å®¢æˆ¶æˆ–å°ˆæ¥­æŠ•è³‡è€…æ¥­å‹™ï¼‰ï¼Œæˆ–æ“”ä»»é«˜ç´šç®¡ç†äººå“¡è§’è‰²ï¼ˆå¦‚CEOã€COOï¼‰è€Œéç›´æ¥å¾äº‹å‰ç·šæ¥­å‹™ã€‚é©ç”¨æ–¼å…·è±å¯Œæµ·å¤–ç¶“é©—è€…çš„æœ‰æ¢ä»¶è±å…ï¼ˆã€ŠæŒ‡å¼•ã€‹4.4.3.2ï¼‰ã€‚</p>

                                <div class="field-row">
                                    <label id="ro_support_label">ç²æŒ‡å®šè² è²¬äººå“¡ç›£ç®¡æ”¯æ´ï¼Ÿ</label>
                                    <div class="mini-toggle">
                                        <label><input type="radio" name="roSupport" value="yes"><span id="support_yes">æ˜¯</span></label>
                                        <label><input type="radio" name="roSupport" value="no" checked><span id="support_no">å¦</span></label>
                                    </div>
                                </div>
                                <p class="help-text" id="ro_support_help">æŒ‡å…¬å¸å·²æŒ‡å®šä¸€åç¾æœ‰çš„è² è²¬äººå“¡ï¼ˆå…·å‚™å®Œæ•´æœ¬åœ°ç›£ç®¡çŸ¥è­˜ï¼‰ç‚ºæ‚¨æä¾›ç›£ç£åŠæ”¯æ´ã€‚é€™æ˜¯å…·è±å¯Œæµ·å¤–ç¶“é©—è€…ç²æœ‰æ¢ä»¶è±å…çš„å¿…è¦æ¢ä»¶ï¼ˆã€ŠæŒ‡å¼•ã€‹4.4.3.2ï¼‰ã€‚</p>
                            </div>
                        </div>

                        <!-- Additional Fields for Conditional Exemptions (LR) -->
                        <div class="form-group" id="lrConditionalFields">
                            <div class="conditional-field">
                                <p style="font-weight:600;margin-bottom:15px;color:var(--secondary);" id="lr_conditional_title">æŒç‰Œä»£è¡¨æœ‰æ¢ä»¶è±å…ç›¸é—œè³‡æ–™ï¼š</p>
                                <div class="field-row">
                                    <label id="itinerant_label">å·¡è¿´å°ˆæ¥­äººå£«ï¼ˆæ¯å¹´åœ¨æ¸¯å°‘æ–¼30å¤©ï¼‰ï¼Ÿ</label>
                                    <div class="mini-toggle">
                                        <label><input type="radio" name="itinerant" value="yes"><span id="itin_yes">æ˜¯</span></label>
                                        <label><input type="radio" name="itinerant" value="no" checked><span id="itin_no">å¦</span></label>
                                    </div>
                                </div>
                                <p class="help-text" id="itinerant_help">æŒ‡æ¯å¹´åœ¨é¦™æ¸¯é€—ç•™ä¸è¶…é30å¤©ã€ä¸»è¦åœ¨æµ·å¤–å·¥ä½œçš„å°ˆæ¥­äººå£«ã€‚å·¡è¿´å°ˆæ¥­äººå£«å¯ç²æœ‰æ¢ä»¶è±å…LRPè€ƒè©¦ï¼Œä½†ç‰Œç…§æœƒé™„å¸¶ç›¸é—œæ¢ä»¶é™åˆ¶å…¶åœ¨æ¸¯æ´»å‹•ç¯„åœï¼ˆã€ŠæŒ‡å¼•ã€‹4.4.3.6ï¼‰ã€‚</p>
                            </div>
                        </div>
                    </div>
                    <div class="card-footer">
                        <button class="btn btn-secondary" onclick="prevStep(3)" id="btn_back3">â† è¿”å›</button>
                        <button class="btn btn-primary" onclick="nextStep(3)" id="btn_next3">ä¸‹ä¸€æ­¥ â†’</button>
                    </div>
                </div>
            </div>

            <!-- Step 4 -->
            <div class="step" id="step4">
                <div class="card">
                    <div class="card-header">
                        <h2 id="s4_title">ç¬¬å››æ­¥ï¼šè€ƒè©¦ç´€éŒ„</h2>
                        <p id="s4_desc">é¸æ“‡éå»3å¹´å…§å·²é€šéçš„è©¦å·ã€‚</p>
                    </div>
                    <div class="card-body">
                        <!-- LRP Explanation Box -->
                        <div class="info-box" style="margin-bottom:20px;">
                            <div>
                                <p><strong id="lrp_explain_title">LRPï¼ˆæœ¬åœ°ç›£ç®¡æ¶æ§‹è©¦å·ï¼‰</strong></p>
                                <p id="lrp_explain_text" style="margin-top:5px;">æ¸¬è©¦é¦™æ¸¯è­‰åˆ¸åŠæœŸè²¨å¸‚å ´çš„æ³•è¦çŸ¥è­˜ã€‚<strong>å·ä¸€</strong>ç‚ºé€šç”¨ç›£ç®¡è©¦å·ï¼Œæ‰€æœ‰æŒç‰Œäººå£«å‡é ˆé€šéï¼ˆç¬¬3ã€7é¡é™¤å¤–ï¼‰ã€‚<strong>å·äºŒè‡³å…­ã€åå…«</strong>ç‚ºå°ˆé …ç›£ç®¡è©¦å·ï¼Œåƒ…è² è²¬äººå“¡(RO)é ˆæŒ‰å…¶å—è¦ç®¡æ´»å‹•é¡åˆ¥é€šéç›¸æ‡‰è©¦å·ã€‚</p>
                            </div>
                        </div>
                        <div class="form-group">
                            <label id="lrp_papers_label">LRPè©¦å·ï¼ˆç›£ç®¡ï¼‰ï¼š</label>
                            <div class="checkbox-grid">
                                <label class="checkbox-item"><input type="checkbox" name="passedPapers" value="1"><span id="p1">å·ä¸€</span></label>
                                <label class="checkbox-item"><input type="checkbox" name="passedPapers" value="2"><span id="p2">å·äºŒ</span></label>
                                <label class="checkbox-item"><input type="checkbox" name="passedPapers" value="3"><span id="p3">å·ä¸‰</span></label>
                                <label class="checkbox-item"><input type="checkbox" name="passedPapers" value="4"><span id="p4">å·å››</span></label>
                                <label class="checkbox-item"><input type="checkbox" name="passedPapers" value="5"><span id="p5">å·äº”</span></label>
                                <label class="checkbox-item"><input type="checkbox" name="passedPapers" value="6"><span id="p6">å·å…­</span></label>
                                <label class="checkbox-item"><input type="checkbox" name="passedPapers" value="18"><span id="p18">å·åå…«</span></label>
                            </div>
                            <p class="help-text" id="lrp_papers_help" style="margin-top:10px;">å·ä¸€ï¼šé€šç”¨ç›£ç®¡ | å·äºŒï¼šè­‰åˆ¸(1,4,8é¡RO) | å·ä¸‰ï¼šè¡ç”Ÿå·¥å…·(2,5é¡RO) | å·å››ï¼šä¿¡è²¸è©•ç´š(10é¡RO) | å·äº”ï¼šæ©Ÿæ§‹èè³‡(6é¡RO) | å·å…­ï¼šè³‡ç”¢ç®¡ç†(9é¡RO) | å·åå…«ï¼šå­˜ç®¡æœå‹™(13é¡RO)</p>
                        </div>

                        <!-- RIQ Explanation Box -->
                        <div class="info-box" style="margin-bottom:20px;margin-top:25px;">
                            <div>
                                <p><strong id="riq_explain_title">RIQï¼ˆèªå¯è¡Œæ¥­è³‡æ ¼è©¦å·ï¼‰</strong></p>
                                <p id="riq_explain_text" style="margin-top:5px;">æ¸¬è©¦é‡‘èå¸‚å ´åŠç”¢å“çš„å¯¦å‹™çŸ¥è­˜ã€‚<strong>å·ä¸ƒ</strong>ç‚ºé€šç”¨é‡‘èå¸‚å ´è©¦å·ï¼Œå¤§éƒ¨åˆ†å—è¦ç®¡æ´»å‹•å‡é ˆé€šéã€‚<strong>å·å…«è‡³åäºŒã€åä¹</strong>ç‚ºå°ˆé …ç”¢å“è©¦å·ï¼Œé ˆæŒ‰å—è¦ç®¡æ´»å‹•é¡åˆ¥é€šéç›¸æ‡‰è©¦å·ã€‚æŒæœ‰ç›¸é—œå­¸æ­·æˆ–å°ˆæ¥­è³‡æ ¼ï¼ˆå¦‚CFAï¼‰è€…å¯ç²è±å…ã€‚</p>
                            </div>
                        </div>
                        <div class="form-group">
                            <label id="riq_papers_label">RIQè©¦å·ï¼ˆå¯¦å‹™ï¼‰ï¼š</label>
                            <div class="checkbox-grid">
                                <label class="checkbox-item"><input type="checkbox" name="passedPapers" value="7"><span id="p7">å·ä¸ƒ</span></label>
                                <label class="checkbox-item"><input type="checkbox" name="passedPapers" value="8"><span id="p8">å·å…«</span></label>
                                <label class="checkbox-item"><input type="checkbox" name="passedPapers" value="9"><span id="p9">å·ä¹</span></label>
                                <label class="checkbox-item"><input type="checkbox" name="passedPapers" value="10"><span id="p10">å·å</span></label>
                                <label class="checkbox-item"><input type="checkbox" name="passedPapers" value="11"><span id="p11">å·åä¸€</span></label>
                                <label class="checkbox-item"><input type="checkbox" name="passedPapers" value="12"><span id="p12">å·åäºŒ</span></label>
                                <label class="checkbox-item"><input type="checkbox" name="passedPapers" value="19"><span id="p19">å·åä¹</span></label>
                            </div>
                            <p class="help-text" id="riq_papers_help" style="margin-top:10px;">å·ä¸ƒï¼šé‡‘èå¸‚å ´(é€šç”¨) | å·å…«ï¼šè­‰åˆ¸(1,4,8é¡) | å·ä¹ï¼šè¡ç”Ÿå·¥å…·(2,5é¡) | å·åï¼šä¿¡è²¸è©•ç´š(10é¡) | å·åä¸€ï¼šæ©Ÿæ§‹èè³‡(6é¡) | å·åäºŒï¼šè³‡ç”¢ç®¡ç†(9é¡) | å·åä¹ï¼šå­˜ç®¡æœå‹™(13é¡)</p>
                        </div>
                        <div class="form-group">
                            <label id="add_papers_label">å…¶ä»–è©¦å·ï¼š</label>
                            <div class="checkbox-grid">
                                <label class="checkbox-item"><input type="checkbox" name="passedPapers" value="15"><span id="p15">å·åäº”</span></label>
                                <label class="checkbox-item"><input type="checkbox" name="passedPapers" value="16"><span id="p16">å·åå…­</span></label>
                                <label class="checkbox-item"><input type="checkbox" name="passedPapers" value="17"><span id="p17">å·åä¸ƒ</span></label>
                            </div>
                        </div>
                    </div>
                    <div class="card-footer">
                        <button class="btn btn-secondary" onclick="prevStep(4)" id="btn_back4">â† è¿”å›</button>
                        <button class="btn btn-success" onclick="calculate()" id="btn_calc">è¨ˆç®—çµæœ</button>
                    </div>
                </div>
            </div>

            <!-- Results -->
            <div class="step" id="stepResults">
                <div id="resultsContent"></div>
                <button class="btn btn-secondary" onclick="restart()" style="width:100%;margin-top:20px;" id="btn_restart">é‡æ–°é–‹å§‹</button>
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:30px;margin-bottom:25px;">
                <div>
                    <h4 id="disclaimer_title">å…è²¬è²æ˜</h4>
                    <p style="font-size:0.85rem;margin-bottom:15px;" id="disclaimer_text">æœ¬è¨ˆç®—å™¨æ ¹æ“šè­‰ç›£æœƒã€Šå‹ä»»èƒ½åŠ›çš„æŒ‡å¼•ã€‹(2024å¹´10æœˆ) æä¾›ä¸€èˆ¬æŒ‡å¼•ã€‚å€‹åˆ¥æƒ…æ³å¯èƒ½æœ‰æ‰€ä¸åŒã€‚å¦‚éœ€äº†è§£å®˜æ–¹è¦æ±‚ï¼Œè«‹ç›´æ¥è«®è©¢è­‰ç›£æœƒã€‚</p>
                    <p><a href="https://www.sfc.hk/TC/rules-and-standards/codes-and-guidelines/guidelines/guidelines-on-competence" target="_blank" id="link_sfc">è­‰ç›£æœƒæŒ‡å¼•</a> | <a href="https://www.hksi.org" target="_blank">HKSI</a> | <a href="https://2cexam.com.hk" target="_blank">2CExam</a></p>
                </div>
                <div>
                    <h4 id="contact_title">ğŸ“ è¯çµ¡æˆ‘å€‘</h4>
                    <p style="font-size:0.85rem;margin-bottom:8px;" id="contact_address">ğŸ“ <span id="address_text">ä¸­ç’°å¾·è¼”é“ä¸­59è™Ÿä¸­å—è¡Œ301å®¤</span></p>
                    <p style="font-size:0.85rem;margin-bottom:8px;" id="contact_mtr">ğŸš‡ <span id="mtr_text">ä¸­ç’°åœ°éµç«™Bå‡ºå£</span></p>
                    <p style="font-size:0.85rem;margin-bottom:8px;" id="contact_hours_title">ğŸ• <span id="hours_title">è¾¦å…¬æ™‚é–“</span></p>
                    <p style="font-size:0.8rem;margin-left:20px;margin-bottom:5px;" id="hours_days">æ˜ŸæœŸä¸€è‡³äº”: 9AM-12PM, 1PM-6PM</p>
                    <p style="font-size:0.75rem;margin-left:20px;margin-bottom:8px;opacity:0.8;" id="hours_lunch">ï¼ˆåˆé£¯æ™‚é–“ä¸æä¾›æœå‹™ï¼‰</p>
                </div>
                <div>
                    <h4 style="margin-bottom:15px;">&nbsp;</h4>
                    <p style="font-size:0.85rem;margin-bottom:8px;">ğŸ“± <a href="tel:+85221109644" style="color:rgba(255,255,255,0.8);">+852 2110 9644</a></p>
                    <p style="font-size:0.85rem;margin-bottom:8px;">âœ‰ï¸ <a href="mailto:info@2cexam.com" style="color:rgba(255,255,255,0.8);">info@2cexam.com</a></p>
                    <p style="font-size:0.85rem;margin-bottom:8px;">ğŸ’¬ WhatsApp: <a href="https://wa.me/85293472064" target="_blank" style="color:rgba(255,255,255,0.8);">+852 9347 2064</a></p>
                    <p style="font-size:0.85rem;margin-bottom:8px;">ğŸ’š WeChat: hk2cexam</p>
                </div>
            </div>
            <div style="border-top:1px solid rgba(255,255,255,0.2);padding-top:15px;text-align:center;">
                <p style="font-size:0.8rem;opacity:0.8;">Â© 2024 2CExam. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // Language - default Traditional Chinese
        let lang = 'tc';
        const texts = {
            en: {
                title: "SFC Exam & Eligibility Checker",
                subtitle: "Determine your exam requirements and licensing eligibility based on SFC Guidelines on Competence (Oct 2024)",
                s1_title: "Step 1: Role & Regulated Activity",
                s1_desc: "Select your role and the regulated activity you're applying for.",
                role_label: "What role are you applying for?",
                role_lr: "Licensed Representative (LR)",
                role_ro: "Responsible Officer (RO)",
                ra_label: "Which Regulated Activity (RA)?",
                type1: "Type 1", type2: "Type 2", type3: "Type 3", type4: "Type 4", type5: "Type 5",
                type6: "Type 6", type7: "Type 7", type8: "Type 8", type9: "Type 9", type10: "Type 10", type13: "Type 13",
                ra1: "Dealing in Securities", ra2: "Dealing in Futures", ra3: "Leveraged FX Trading",
                ra4: "Advising on Securities", ra5: "Advising on Futures", ra6: "Corporate Finance",
                ra7: "Automated Trading", ra8: "Margin Financing", ra9: "Asset Management",
                ra10: "Credit Rating", ra13: "Depositary Services", no_exam: "No Exam", new_2024: "New 2024",
                s2_title: "Step 2: Licensing History", s2_desc: "Your licensing history affects exam exemptions.",
                current_license: "Are you currently licensed by the SFC?",
                yes1: "Yes", no1: "No", yes2: "Yes", no2: "No", yes3: "Yes", no3: "No",
                current_ra_label: "Current licenses:",
                former_license: "Have you been licensed in the past?",
                former_ra_label: "Previous licenses:",
                years_absent: "Years out of the industry:",
                years_unit: "years", years_unit2: "years", years_unit3: "years", years_unit4: "years",
                years_help: "3-8 years = CPT hours required; >8 years = no exemption",
                s3_title: "Step 3: Qualifications & Experience", s3_desc: "Your qualifications determine exam exemptions.",
                academic_label: "Highest Academic Qualification:",
                acad_none: "No formal qualification",
                acad_sec: "Secondary education (HKCEE/HKDSE)",
                acad_deg_other: "Bachelor's degree (other fields)",
                acad_deg_rel: "Bachelor's in Accounting/Business/Economics/Finance/Law",
                acad_deg_courses: "Bachelor's (other) + 2 relevant courses",
                acad_masters: "Master's in relevant field",
                acad_mba: "MBA",
                prof_label: "Professional Qualifications:",
                exp_8_label: "Relevant experience in past 8 years:",
                exp_8_help: "5+ years = RIQ exemption",
                exp_6_label: "Relevant experience in past 6 years:",
                exp_6_help: "RO requires 3+ years",
                mgmt_label: "Management experience:",
                mgmt_help: "RO requires 2+ years",
                pi_label: "Serving professional investors only?",
                s4_title: "Step 4: Exam History", s4_desc: "Select papers passed within 3 years.",
                lrp_explain_title: "LRP (Local Regulatory Paper)",
                lrp_explain_text: "Tests knowledge of Hong Kong securities and futures regulations. <strong>Paper 1</strong> is the general regulatory paper required for all licensed persons (except Types 3, 7). <strong>Papers 2-6, 18</strong> are specialized regulatory papers required only for Responsible Officers (RO) based on their RA type.",
                lrp_papers_label: "LRP Papers (Regulatory):",
                lrp_papers_help: "Paper 1: General Regulation | Paper 2: Securities (Types 1,4,8 RO) | Paper 3: Derivatives (Types 2,5 RO) | Paper 4: Credit Rating (Type 10 RO) | Paper 5: Corporate Finance (Type 6 RO) | Paper 6: Asset Management (Type 9 RO) | Paper 18: Depositary (Type 13 RO)",
                riq_explain_title: "RIQ (Recognized Industry Qualification)",
                riq_explain_text: "Tests practical knowledge of financial markets and products. <strong>Paper 7</strong> is the general financial markets paper required for most RAs. <strong>Papers 8-12, 19</strong> are specialized product papers based on RA type. Those with relevant degrees or professional qualifications (e.g., CFA) may be exempt.",
                riq_papers_label: "RIQ Papers (Practical):",
                riq_papers_help: "Paper 7: Financial Markets (General) | Paper 8: Securities (Types 1,4,8) | Paper 9: Derivatives (Types 2,5) | Paper 10: Credit Rating (Type 10) | Paper 11: Corporate Finance (Type 6) | Paper 12: Asset Management (Type 9) | Paper 19: Depositary (Type 13)",
                add_papers_label: "Additional Papers:",
                p1: "Paper 1", p2: "Paper 2", p3: "Paper 3", p4: "Paper 4", p5: "Paper 5", p6: "Paper 6",
                p7: "Paper 7", p8: "Paper 8", p9: "Paper 9", p10: "Paper 10", p11: "Paper 11", p12: "Paper 12",
                p15: "Paper 15", p16: "Paper 16", p17: "Paper 17", p18: "Paper 18", p19: "Paper 19",
                btn_next1: "Next Step â†’", btn_next2: "Next Step â†’", btn_next3: "Next Step â†’",
                btn_back2: "â† Back", btn_back3: "â† Back", btn_back4: "â† Back",
                btn_calc: "Calculate Results", btn_restart: "Start Over",
                result_eligible: "You appear to be eligible",
                result_warning: "Conditional Eligibility",
                result_not_eligible: "Eligibility Concerns",
                papers_required: "Papers You Need to Pass",
                papers_exempt: "Papers You Are Exempt From",
                summary: "Summary",
                papers_to_pass: "Papers to pass:",
                papers_exempt_count: "Papers exempt:",
                cpt_required: "CPT Hours Required",
                cpt_before: "Must complete BEFORE applying",
                alert_select: "Please select a role and regulated activity.",
                disclaimer_title: "Disclaimer",
                disclaimer_text: "This calculator provides general guidance based on SFC Guidelines on Competence (October 2024). Individual circumstances may vary. For official requirements, consult the SFC directly.",
                link_sfc: "SFC Guidelines",
                contact_title: "ğŸ“ Contact Us",
                address_text: "Room 301, 59 Des Voeux Road Central, Central",
                mtr_text: "Central MTR Exit B",
                hours_title: "Office Hours",
                hours_days: "Mon-Fri: 9AM-12PM, 1PM-6PM",
                hours_lunch: "(No service during lunch)",
                // New fields for enhanced exemption logic
                temp_licence_label: "Applying for Temporary Licence?",
                temp_yes: "Yes", temp_no: "No",
                never_p1_label: "Never attempted Paper 1?",
                never_p1_yes: "Yes", never_p1_no: "No",
                licensed_hk_exp_label: "Licensed HK Experience:",
                years_unit5: "years", years_unit6: "years",
                ro_conditional_title: "RO Conditional Exemption Information:",
                schedule3_exp_label: "Experience in Schedule 3 Exchange Jurisdictions:",
                regulatory_work_label: "3+ years full-time regulatory/compliance work in past 6 years?",
                reg_yes: "Yes", reg_no: "No",
                limited_scope_label: "Limited Scope Activities / Senior Management Role?",
                scope_yes: "Yes", scope_no: "No",
                ro_support_label: "Has Regulatory Support from Designated RO?",
                support_yes: "Yes", support_no: "No",
                lr_conditional_title: "LR Conditional Exemption Information:",
                itinerant_label: "Itinerant Professional (less than 30 days/year in HK)?",
                itin_yes: "Yes", itin_no: "No",
                // Help text for conditional exemption fields
                temp_licence_help: "Temporary licence applicants are exempt from RIQ and LRP exam requirements (applicable to Types 1, 2, 4, 5, 6, 10, 11 only). See Guidelines 4.4.2.1(b) and 4.4.3.1(b).",
                never_p1_help: "Per Guidelines 4.4.3.7, current or former LRs (within 3 years) who have never attempted Paper 1 may obtain conditional exemption, but must complete +5 CPT hours (local regulatory knowledge).",
                licensed_hk_exp_help: "Total years holding an SFC licence while carrying on regulated activities in Hong Kong. If you are currently licensed as LR and applying to upgrade to RO for the same RA type, you need 3+ years of licensed experience for conditional LRP exemption (Guidelines 4.4.3.4).",
                schedule3_exp_help: "Experience in regulated activities in jurisdictions with recognized exchanges listed in Schedule 3 of the Securities and Futures (Stock Market Listing) Rules (e.g., USA, UK, Japan, Australia, Singapore). 8+ years qualifies for conditional exemption (Guidelines 4.4.3.2 and 4.4.3.5).",
                regulatory_work_help: "Full-time regulatory or compliance work in Hong Kong (e.g., at SFC, HKMA, IA, or compliance department of licensed corporations). Qualifying individuals are fully exempt from LRP exams (Guidelines 4.4.3.1(c)).",
                limited_scope_help: "Means the RO only engages in limited scope regulated activities (e.g., serving only institutional clients or professional investors), or holds a senior management role (e.g., CEO, COO) rather than direct front-line business. Applies to conditional exemption for those with substantial overseas experience (Guidelines 4.4.3.2).",
                ro_support_help: "Means the firm has designated an existing Responsible Officer (with full local regulatory knowledge) to provide supervision and support. This is a mandatory condition for conditional exemption for those with substantial overseas experience (Guidelines 4.4.3.2).",
                itinerant_help: "Refers to professionals who stay in Hong Kong for no more than 30 days per year and primarily work overseas. Itinerant professionals may obtain conditional LRP exemption, but the licence will be subject to conditions limiting their activities in Hong Kong (Guidelines 4.4.3.6).",
                // Exemption result translations
                exempt_full: "Full Exemption",
                exempt_conditional: "Conditional Exemption",
                exempt_reentrant: "Re-entrant Exemption",
                conditions_title: "Conditions:",
                cpt_additional: "Additional CPT Requirements",
                same_riq_same_role: "Same RIQ requirements, same role",
                same_lrp_same_role: "Same LRP requirements, same role",
                different_riq_exp: "Different RIQ requirements, 5+ years experience",
                lr_to_ro_upgrade: "LR to RO upgrade with licensed HK experience",
                foreign_exp_pi: "8+ years foreign experience (Schedule 3), PI only",
                itinerant_exemption: "Itinerant professional exemption",
                temp_licence_exemption: "Temporary licence",
                regulatory_work_exemption: "3+ years regulatory/compliance work in HK",
                condition_cpt_5_industry: "+5 CPT hours in industry/product knowledge (one-off)",
                condition_cpt_5_regulatory: "+5 CPT hours in local regulatory knowledge (one-off)",
                condition_licensing_conditions: "Licensing conditions may apply",
                condition_limited_scope: "Limited scope activities only",
                condition_ro_supervision: "Under designated RO supervision",
                condition_pi_only: "Professional investors only"
            },
            tc: {
                title: "è­‰ç›£æœƒè€ƒè©¦åŠè³‡æ ¼æª¢æŸ¥å™¨",
                subtitle: "æ ¹æ“šè­‰ç›£æœƒã€Šå‹ä»»èƒ½åŠ›çš„æŒ‡å¼•ã€‹(2024å¹´10æœˆ) ç¢ºå®šè€ƒè©¦è¦æ±‚åŠç‰Œç…§è³‡æ ¼",
                s1_title: "ç¬¬ä¸€æ­¥ï¼šè§’è‰²åŠå—è¦ç®¡æ´»å‹•",
                s1_desc: "é¸æ“‡æ‚¨ç”³è«‹çš„è§’è‰²åŠå—è¦ç®¡æ´»å‹•é¡å‹ã€‚",
                role_label: "æ‚¨ç”³è«‹çš„æ˜¯ä»€éº¼è§’è‰²ï¼Ÿ",
                role_lr: "æŒç‰Œä»£è¡¨ (LR)",
                role_ro: "è² è²¬äººå“¡ (RO)",
                ra_label: "å“ªç¨®å—è¦ç®¡æ´»å‹• (RA)ï¼Ÿ",
                type1: "ç¬¬1é¡", type2: "ç¬¬2é¡", type3: "ç¬¬3é¡", type4: "ç¬¬4é¡", type5: "ç¬¬5é¡",
                type6: "ç¬¬6é¡", type7: "ç¬¬7é¡", type8: "ç¬¬8é¡", type9: "ç¬¬9é¡", type10: "ç¬¬10é¡", type13: "ç¬¬13é¡",
                ra1: "è­‰åˆ¸äº¤æ˜“", ra2: "æœŸè²¨åˆç´„äº¤æ˜“", ra3: "æ§“æ¡¿å¼å¤–åŒ¯äº¤æ˜“",
                ra4: "å°±è­‰åˆ¸æä¾›æ„è¦‹", ra5: "å°±æœŸè²¨åˆç´„æä¾›æ„è¦‹", ra6: "å°±æ©Ÿæ§‹èè³‡æä¾›æ„è¦‹",
                ra7: "æä¾›è‡ªå‹•åŒ–äº¤æ˜“æœå‹™", ra8: "æä¾›è­‰åˆ¸ä¿è­‰é‡‘èè³‡", ra9: "è³‡ç”¢ç®¡ç†",
                ra10: "æä¾›ä¿¡è²¸è©•ç´šæœå‹™", ra13: "ç‚ºé›†é«”æŠ•è³‡è¨ˆåŠƒæä¾›å­˜ç®¡æœå‹™", no_exam: "ç„¡é ˆè€ƒè©¦", new_2024: "2024æ–°å¢",
                s2_title: "ç¬¬äºŒæ­¥ï¼šç‰Œç…§ç´€éŒ„", s2_desc: "æ‚¨çš„ç‰Œç…§ç´€éŒ„æœƒå½±éŸ¿è€ƒè©¦è±å…ã€‚",
                current_license: "æ‚¨ç›®å‰æ˜¯å¦æŒæœ‰è­‰ç›£æœƒç‰Œç…§ï¼Ÿ",
                yes1: "æ˜¯", no1: "å¦", yes2: "æ˜¯", no2: "å¦", yes3: "æ˜¯", no3: "å¦",
                current_ra_label: "ç›®å‰æŒæœ‰çš„ç‰Œç…§ï¼š",
                former_license: "æ‚¨éå»æ˜¯å¦æ›¾æŒæœ‰ç‰Œç…§ï¼Ÿ",
                former_ra_label: "éå»æŒæœ‰çš„ç‰Œç…§ï¼š",
                years_absent: "é›¢é–‹è¡Œæ¥­å¤šé•·æ™‚é–“ï¼š",
                years_unit: "å¹´", years_unit2: "å¹´", years_unit3: "å¹´", years_unit4: "å¹´",
                years_help: "3-8å¹´ = éœ€è¦CPTæ™‚æ•¸ï¼›>8å¹´ = æ²’æœ‰è±å…",
                s3_title: "ç¬¬ä¸‰æ­¥ï¼šè³‡æ­·åŠç¶“é©—", s3_desc: "æ‚¨çš„è³‡æ­·æ±ºå®šè€ƒè©¦è±å…ã€‚",
                academic_label: "æœ€é«˜å­¸æ­·ï¼š",
                acad_none: "æ²’æœ‰æ­£å¼å­¸æ­·",
                acad_sec: "ä¸­å­¸æ•™è‚² (HKCEE/HKDSE)",
                acad_deg_other: "å­¸å£«å­¸ä½ï¼ˆå…¶ä»–é ˜åŸŸï¼‰",
                acad_deg_rel: "æœƒè¨ˆ/å•†æ¥­/ç¶“æ¿Ÿ/é‡‘è/æ³•å¾‹å­¸å£«å­¸ä½",
                acad_deg_courses: "å­¸å£«å­¸ä½ï¼ˆå…¶ä»–ï¼‰+ 2é–€ç›¸é—œèª²ç¨‹",
                acad_masters: "ç›¸é—œé ˜åŸŸç¢©å£«å­¸ä½",
                acad_mba: "MBA",
                prof_label: "å°ˆæ¥­è³‡æ ¼ï¼š",
                exp_8_label: "éå»8å¹´ç›¸é—œç¶“é©—ï¼š",
                exp_8_help: "5å¹´ä»¥ä¸Š = RIQè±å…",
                exp_6_label: "éå»6å¹´ç›¸é—œç¶“é©—ï¼š",
                exp_6_help: "è² è²¬äººå“¡éœ€3å¹´ä»¥ä¸Š",
                mgmt_label: "ç®¡ç†ç¶“é©—ï¼š",
                mgmt_help: "è² è²¬äººå“¡éœ€2å¹´ä»¥ä¸Š",
                pi_label: "æ˜¯å¦åªæœå‹™å°ˆæ¥­æŠ•è³‡è€…ï¼Ÿ",
                s4_title: "ç¬¬å››æ­¥ï¼šè€ƒè©¦ç´€éŒ„", s4_desc: "é¸æ“‡éå»3å¹´å…§å·²é€šéçš„è©¦å·ã€‚",
                lrp_explain_title: "LRPï¼ˆæœ¬åœ°ç›£ç®¡æ¶æ§‹è©¦å·ï¼‰",
                lrp_explain_text: "æ¸¬è©¦é¦™æ¸¯è­‰åˆ¸åŠæœŸè²¨å¸‚å ´çš„æ³•è¦çŸ¥è­˜ã€‚<strong>å·ä¸€</strong>ç‚ºé€šç”¨ç›£ç®¡è©¦å·ï¼Œæ‰€æœ‰æŒç‰Œäººå£«å‡é ˆé€šéï¼ˆç¬¬3ã€7é¡é™¤å¤–ï¼‰ã€‚<strong>å·äºŒè‡³å…­ã€åå…«</strong>ç‚ºå°ˆé …ç›£ç®¡è©¦å·ï¼Œåƒ…è² è²¬äººå“¡(RO)é ˆæŒ‰å…¶å—è¦ç®¡æ´»å‹•é¡åˆ¥é€šéç›¸æ‡‰è©¦å·ã€‚",
                lrp_papers_label: "LRPè©¦å·ï¼ˆç›£ç®¡ï¼‰ï¼š",
                lrp_papers_help: "å·ä¸€ï¼šé€šç”¨ç›£ç®¡ | å·äºŒï¼šè­‰åˆ¸(1,4,8é¡RO) | å·ä¸‰ï¼šè¡ç”Ÿå·¥å…·(2,5é¡RO) | å·å››ï¼šä¿¡è²¸è©•ç´š(10é¡RO) | å·äº”ï¼šæ©Ÿæ§‹èè³‡(6é¡RO) | å·å…­ï¼šè³‡ç”¢ç®¡ç†(9é¡RO) | å·åå…«ï¼šå­˜ç®¡æœå‹™(13é¡RO)",
                riq_explain_title: "RIQï¼ˆèªå¯è¡Œæ¥­è³‡æ ¼è©¦å·ï¼‰",
                riq_explain_text: "æ¸¬è©¦é‡‘èå¸‚å ´åŠç”¢å“çš„å¯¦å‹™çŸ¥è­˜ã€‚<strong>å·ä¸ƒ</strong>ç‚ºé€šç”¨é‡‘èå¸‚å ´è©¦å·ï¼Œå¤§éƒ¨åˆ†å—è¦ç®¡æ´»å‹•å‡é ˆé€šéã€‚<strong>å·å…«è‡³åäºŒã€åä¹</strong>ç‚ºå°ˆé …ç”¢å“è©¦å·ï¼Œé ˆæŒ‰å—è¦ç®¡æ´»å‹•é¡åˆ¥é€šéç›¸æ‡‰è©¦å·ã€‚æŒæœ‰ç›¸é—œå­¸æ­·æˆ–å°ˆæ¥­è³‡æ ¼ï¼ˆå¦‚CFAï¼‰è€…å¯ç²è±å…ã€‚",
                riq_papers_label: "RIQè©¦å·ï¼ˆå¯¦å‹™ï¼‰ï¼š",
                riq_papers_help: "å·ä¸ƒï¼šé‡‘èå¸‚å ´(é€šç”¨) | å·å…«ï¼šè­‰åˆ¸(1,4,8é¡) | å·ä¹ï¼šè¡ç”Ÿå·¥å…·(2,5é¡) | å·åï¼šä¿¡è²¸è©•ç´š(10é¡) | å·åä¸€ï¼šæ©Ÿæ§‹èè³‡(6é¡) | å·åäºŒï¼šè³‡ç”¢ç®¡ç†(9é¡) | å·åä¹ï¼šå­˜ç®¡æœå‹™(13é¡)",
                add_papers_label: "å…¶ä»–è©¦å·ï¼š",
                p1: "å·ä¸€", p2: "å·äºŒ", p3: "å·ä¸‰", p4: "å·å››", p5: "å·äº”", p6: "å·å…­",
                p7: "å·ä¸ƒ", p8: "å·å…«", p9: "å·ä¹", p10: "å·å", p11: "å·åä¸€", p12: "å·åäºŒ",
                p15: "å·åäº”", p16: "å·åå…­", p17: "å·åä¸ƒ", p18: "å·åå…«", p19: "å·åä¹",
                btn_next1: "ä¸‹ä¸€æ­¥ â†’", btn_next2: "ä¸‹ä¸€æ­¥ â†’", btn_next3: "ä¸‹ä¸€æ­¥ â†’",
                btn_back2: "â† è¿”å›", btn_back3: "â† è¿”å›", btn_back4: "â† è¿”å›",
                btn_calc: "è¨ˆç®—çµæœ", btn_restart: "é‡æ–°é–‹å§‹",
                result_eligible: "æ‚¨ä¼¼ä¹ç¬¦åˆè³‡æ ¼",
                result_warning: "æœ‰æ¢ä»¶ç¬¦åˆè³‡æ ¼",
                result_not_eligible: "è³‡æ ¼å•é¡Œ",
                papers_required: "éœ€è¦é€šéçš„è©¦å·",
                papers_exempt: "ç²è±å…çš„è©¦å·",
                summary: "æ‘˜è¦",
                papers_to_pass: "éœ€é€šéè©¦å·ï¼š",
                papers_exempt_count: "è±å…è©¦å·ï¼š",
                cpt_required: "éœ€è¦CPTæ™‚æ•¸",
                cpt_before: "å¿…é ˆåœ¨ç”³è«‹å‰å®Œæˆ",
                alert_select: "è«‹é¸æ“‡è§’è‰²åŠå—è¦ç®¡æ´»å‹•ã€‚",
                disclaimer_title: "å…è²¬è²æ˜",
                disclaimer_text: "æœ¬è¨ˆç®—å™¨æ ¹æ“šè­‰ç›£æœƒã€Šå‹ä»»èƒ½åŠ›çš„æŒ‡å¼•ã€‹(2024å¹´10æœˆ) æä¾›ä¸€èˆ¬æŒ‡å¼•ã€‚å€‹åˆ¥æƒ…æ³å¯èƒ½æœ‰æ‰€ä¸åŒã€‚å¦‚éœ€äº†è§£å®˜æ–¹è¦æ±‚ï¼Œè«‹ç›´æ¥è«®è©¢è­‰ç›£æœƒã€‚",
                link_sfc: "è­‰ç›£æœƒæŒ‡å¼•",
                contact_title: "ğŸ“ è¯çµ¡æˆ‘å€‘",
                address_text: "ä¸­ç’°å¾·è¼”é“ä¸­59è™Ÿä¸­å—è¡Œ301å®¤",
                mtr_text: "ä¸­ç’°åœ°éµç«™Bå‡ºå£",
                hours_title: "è¾¦å…¬æ™‚é–“",
                hours_days: "æ˜ŸæœŸä¸€è‡³äº”: 9AM-12PM, 1PM-6PM",
                hours_lunch: "ï¼ˆåˆé£¯æ™‚é–“ä¸æä¾›æœå‹™ï¼‰",
                // New fields for enhanced exemption logic
                temp_licence_label: "ç”³è«‹è‡¨æ™‚ç‰Œç…§ï¼Ÿ",
                temp_yes: "æ˜¯", temp_no: "å¦",
                never_p1_label: "å¾æœªå˜—è©¦éå·ä¸€è€ƒè©¦ï¼Ÿ",
                never_p1_yes: "æ˜¯", never_p1_no: "å¦",
                licensed_hk_exp_label: "æŒç‰Œé¦™æ¸¯ç¶“é©—ï¼š",
                years_unit5: "å¹´", years_unit6: "å¹´",
                ro_conditional_title: "è² è²¬äººå“¡æœ‰æ¢ä»¶è±å…ç›¸é—œè³‡æ–™ï¼š",
                schedule3_exp_label: "é™„è¡¨3èªå¯äº¤æ˜“æ‰€å¸æ³•ç®¡è½„å€ç¶“é©—ï¼š",
                regulatory_work_label: "éå»6å¹´å…§å…¨è·ç›£ç®¡/åˆè¦å·¥ä½œæ»¿3å¹´ï¼Ÿ",
                reg_yes: "æ˜¯", reg_no: "å¦",
                limited_scope_label: "æœ‰é™ç¯„åœæ´»å‹•/é«˜ç´šç®¡ç†äººå“¡è§’è‰²ï¼Ÿ",
                scope_yes: "æ˜¯", scope_no: "å¦",
                ro_support_label: "ç²æŒ‡å®šè² è²¬äººå“¡ç›£ç®¡æ”¯æ´ï¼Ÿ",
                support_yes: "æ˜¯", support_no: "å¦",
                lr_conditional_title: "æŒç‰Œä»£è¡¨æœ‰æ¢ä»¶è±å…ç›¸é—œè³‡æ–™ï¼š",
                itinerant_label: "å·¡è¿´å°ˆæ¥­äººå£«ï¼ˆæ¯å¹´åœ¨æ¸¯å°‘æ–¼30å¤©ï¼‰ï¼Ÿ",
                itin_yes: "æ˜¯", itin_no: "å¦",
                // Help text for conditional exemption fields
                temp_licence_help: "è‡¨æ™‚ç‰Œç…§ç”³è«‹äººå¯ç²è±å…RIQåŠLRPè€ƒè©¦è¦æ±‚ï¼ˆåƒ…é©ç”¨æ–¼ç¬¬1ã€2ã€4ã€5ã€6ã€10ã€11é¡ï¼‰ã€‚è©³è¦‹ã€ŠæŒ‡å¼•ã€‹4.4.2.1(b)åŠ4.4.3.1(b)ã€‚",
                never_p1_help: "æ ¹æ“šã€ŠæŒ‡å¼•ã€‹4.4.3.7ï¼Œç¾æ™‚æˆ–3å¹´å…§æ›¾æŒç‰Œçš„LRè‹¥å¾æœªå˜—è©¦éå·ä¸€è€ƒè©¦ï¼Œå¯ç²æœ‰æ¢ä»¶è±å…ï¼Œä½†éœ€é¡å¤–å®Œæˆ+5 CPTå°æ™‚ï¼ˆæœ¬åœ°ç›£ç®¡çŸ¥è­˜ï¼‰ã€‚",
                licensed_hk_exp_help: "åœ¨é¦™æ¸¯æŒæœ‰è­‰ç›£æœƒç‰Œç…§å¾äº‹å—è¦ç®¡æ´»å‹•çš„ç¸½å¹´è³‡ã€‚è‹¥æ‚¨ç›®å‰æŒç‰Œç‚ºLRä¸¦ç”³è«‹å‡ç´šç‚ºåŒä¸€é¡åˆ¥çš„ROï¼Œéœ€å…·å‚™3å¹´ä»¥ä¸ŠæŒç‰Œç¶“é©—æ–¹å¯ç²æœ‰æ¢ä»¶è±å…LRPè€ƒè©¦ï¼ˆã€ŠæŒ‡å¼•ã€‹4.4.3.4ï¼‰ã€‚",
                schedule3_exp_help: "åœ¨ã€Šè­‰åˆ¸åŠæœŸè²¨(åœ¨è­‰åˆ¸å¸‚å ´ä¸Šå¸‚)è¦å‰‡ã€‹é™„è¡¨3æ‰€åˆ—èªå¯äº¤æ˜“æ‰€çš„å¸æ³•ç®¡è½„å€ï¼ˆå¦‚ç¾åœ‹ã€è‹±åœ‹ã€æ—¥æœ¬ã€æ¾³æ´²ã€æ–°åŠ å¡ç­‰ï¼‰å¾äº‹ç›¸é—œå—è¦ç®¡æ´»å‹•çš„ç¶“é©—å¹´è³‡ã€‚8å¹´ä»¥ä¸Šå¯ç²æœ‰æ¢ä»¶è±å…ï¼ˆã€ŠæŒ‡å¼•ã€‹4.4.3.2åŠ4.4.3.5ï¼‰ã€‚",
                regulatory_work_help: "åœ¨é¦™æ¸¯å¾äº‹å…¨è·ç›£ç®¡æˆ–åˆè¦å·¥ä½œï¼ˆå¦‚åœ¨è­‰ç›£æœƒã€é‡‘ç®¡å±€ã€ä¿ç›£å±€æˆ–æŒç‰Œæ³•åœ˜çš„åˆè¦éƒ¨é–€å·¥ä½œï¼‰ã€‚ç¬¦åˆè€…å¯ç²å®Œå…¨è±å…LRPè€ƒè©¦ï¼ˆã€ŠæŒ‡å¼•ã€‹4.4.3.1(c)ï¼‰ã€‚",
                limited_scope_help: "æŒ‡ROåªå¾äº‹æœ‰é™ç¯„åœçš„å—è¦ç®¡æ´»å‹•ï¼ˆå¦‚åƒ…è™•ç†æ©Ÿæ§‹å®¢æˆ¶æˆ–å°ˆæ¥­æŠ•è³‡è€…æ¥­å‹™ï¼‰ï¼Œæˆ–æ“”ä»»é«˜ç´šç®¡ç†äººå“¡è§’è‰²ï¼ˆå¦‚CEOã€COOï¼‰è€Œéç›´æ¥å¾äº‹å‰ç·šæ¥­å‹™ã€‚é©ç”¨æ–¼å…·è±å¯Œæµ·å¤–ç¶“é©—è€…çš„æœ‰æ¢ä»¶è±å…ï¼ˆã€ŠæŒ‡å¼•ã€‹4.4.3.2ï¼‰ã€‚",
                ro_support_help: "æŒ‡å…¬å¸å·²æŒ‡å®šä¸€åç¾æœ‰çš„è² è²¬äººå“¡ï¼ˆå…·å‚™å®Œæ•´æœ¬åœ°ç›£ç®¡çŸ¥è­˜ï¼‰ç‚ºæ‚¨æä¾›ç›£ç£åŠæ”¯æ´ã€‚é€™æ˜¯å…·è±å¯Œæµ·å¤–ç¶“é©—è€…ç²æœ‰æ¢ä»¶è±å…çš„å¿…è¦æ¢ä»¶ï¼ˆã€ŠæŒ‡å¼•ã€‹4.4.3.2ï¼‰ã€‚",
                itinerant_help: "æŒ‡æ¯å¹´åœ¨é¦™æ¸¯é€—ç•™ä¸è¶…é30å¤©ã€ä¸»è¦åœ¨æµ·å¤–å·¥ä½œçš„å°ˆæ¥­äººå£«ã€‚å·¡è¿´å°ˆæ¥­äººå£«å¯ç²æœ‰æ¢ä»¶è±å…LRPè€ƒè©¦ï¼Œä½†ç‰Œç…§æœƒé™„å¸¶ç›¸é—œæ¢ä»¶é™åˆ¶å…¶åœ¨æ¸¯æ´»å‹•ç¯„åœï¼ˆã€ŠæŒ‡å¼•ã€‹4.4.3.6ï¼‰ã€‚",
                // Exemption result translations
                exempt_full: "å®Œå…¨è±å…",
                exempt_conditional: "æœ‰æ¢ä»¶è±å…",
                exempt_reentrant: "é‡è¿”æ¥­ç•Œè±å…",
                conditions_title: "æ¢ä»¶ï¼š",
                cpt_additional: "é¡å¤–CPTè¦æ±‚",
                same_riq_same_role: "ç›¸åŒRIQè¦æ±‚ã€ç›¸åŒè§’è‰²",
                same_lrp_same_role: "ç›¸åŒLRPè¦æ±‚ã€ç›¸åŒè§’è‰²",
                different_riq_exp: "ä¸åŒRIQè¦æ±‚ã€5å¹´ä»¥ä¸Šç¶“é©—",
                lr_to_ro_upgrade: "LRå‡ç´šROï¼Œå…·æŒç‰Œé¦™æ¸¯ç¶“é©—",
                foreign_exp_pi: "8å¹´ä»¥ä¸Šæµ·å¤–ç¶“é©—ï¼ˆé™„è¡¨3ï¼‰ï¼Œåƒ…é™å°ˆæ¥­æŠ•è³‡è€…",
                itinerant_exemption: "å·¡è¿´å°ˆæ¥­äººå£«è±å…",
                temp_licence_exemption: "è‡¨æ™‚ç‰Œç…§",
                regulatory_work_exemption: "3å¹´ä»¥ä¸Šé¦™æ¸¯ç›£ç®¡/åˆè¦å·¥ä½œ",
                condition_cpt_5_industry: "ä¸€æ¬¡æ€§+5 CPTå°æ™‚ï¼ˆè¡Œæ¥­/ç”¢å“çŸ¥è­˜ï¼‰",
                condition_cpt_5_regulatory: "ä¸€æ¬¡æ€§+5 CPTå°æ™‚ï¼ˆæœ¬åœ°ç›£ç®¡çŸ¥è­˜ï¼‰",
                condition_licensing_conditions: "å¯èƒ½é™„å¸¶ç‰Œç…§æ¢ä»¶",
                condition_limited_scope: "åƒ…é™æœ‰é™ç¯„åœæ´»å‹•",
                condition_ro_supervision: "å—æŒ‡å®šè² è²¬äººå“¡ç›£ç£",
                condition_pi_only: "åƒ…é™å°ˆæ¥­æŠ•è³‡è€…"
            },
            sc: {
                title: "è¯ç›‘ä¼šè€ƒè¯•åŠèµ„æ ¼æ£€æŸ¥å™¨",
                subtitle: "æ ¹æ®è¯ç›‘ä¼šã€Šèƒœä»»èƒ½åŠ›çš„æŒ‡å¼•ã€‹(2024å¹´10æœˆ) ç¡®å®šè€ƒè¯•è¦æ±‚åŠç‰Œç…§èµ„æ ¼",
                s1_title: "ç¬¬ä¸€æ­¥ï¼šè§’è‰²åŠå—è§„ç®¡æ´»åŠ¨",
                s1_desc: "é€‰æ‹©æ‚¨ç”³è¯·çš„è§’è‰²åŠå—è§„ç®¡æ´»åŠ¨ç±»å‹ã€‚",
                role_label: "æ‚¨ç”³è¯·çš„æ˜¯ä»€ä¹ˆè§’è‰²ï¼Ÿ",
                role_lr: "æŒç‰Œä»£è¡¨ (LR)",
                role_ro: "è´Ÿè´£äººå‘˜ (RO)",
                ra_label: "å“ªç§å—è§„ç®¡æ´»åŠ¨ (RA)ï¼Ÿ",
                type1: "ç¬¬1ç±»", type2: "ç¬¬2ç±»", type3: "ç¬¬3ç±»", type4: "ç¬¬4ç±»", type5: "ç¬¬5ç±»",
                type6: "ç¬¬6ç±»", type7: "ç¬¬7ç±»", type8: "ç¬¬8ç±»", type9: "ç¬¬9ç±»", type10: "ç¬¬10ç±»", type13: "ç¬¬13ç±»",
                ra1: "è¯åˆ¸äº¤æ˜“", ra2: "æœŸè´§åˆçº¦äº¤æ˜“", ra3: "æ æ†å¼å¤–æ±‡äº¤æ˜“",
                ra4: "å°±è¯åˆ¸æä¾›æ„è§", ra5: "å°±æœŸè´§åˆçº¦æä¾›æ„è§", ra6: "å°±æœºæ„èèµ„æä¾›æ„è§",
                ra7: "æä¾›è‡ªåŠ¨åŒ–äº¤æ˜“æœåŠ¡", ra8: "æä¾›è¯åˆ¸ä¿è¯é‡‘èèµ„", ra9: "èµ„äº§ç®¡ç†",
                ra10: "æä¾›ä¿¡è´·è¯„çº§æœåŠ¡", ra13: "ä¸ºé›†ä½“æŠ•èµ„è®¡åˆ’æä¾›å­˜ç®¡æœåŠ¡", no_exam: "æ— é¡»è€ƒè¯•", new_2024: "2024æ–°å¢",
                s2_title: "ç¬¬äºŒæ­¥ï¼šç‰Œç…§è®°å½•", s2_desc: "æ‚¨çš„ç‰Œç…§è®°å½•ä¼šå½±å“è€ƒè¯•è±å…ã€‚",
                current_license: "æ‚¨ç›®å‰æ˜¯å¦æŒæœ‰è¯ç›‘ä¼šç‰Œç…§ï¼Ÿ",
                yes1: "æ˜¯", no1: "å¦", yes2: "æ˜¯", no2: "å¦", yes3: "æ˜¯", no3: "å¦",
                current_ra_label: "ç›®å‰æŒæœ‰çš„ç‰Œç…§ï¼š",
                former_license: "æ‚¨è¿‡å»æ˜¯å¦æ›¾æŒæœ‰ç‰Œç…§ï¼Ÿ",
                former_ra_label: "è¿‡å»æŒæœ‰çš„ç‰Œç…§ï¼š",
                years_absent: "ç¦»å¼€è¡Œä¸šå¤šé•¿æ—¶é—´ï¼š",
                years_unit: "å¹´", years_unit2: "å¹´", years_unit3: "å¹´", years_unit4: "å¹´",
                years_help: "3-8å¹´ = éœ€è¦CPTæ—¶æ•°ï¼›>8å¹´ = æ²¡æœ‰è±å…",
                s3_title: "ç¬¬ä¸‰æ­¥ï¼šèµ„å†åŠç»éªŒ", s3_desc: "æ‚¨çš„èµ„å†å†³å®šè€ƒè¯•è±å…ã€‚",
                academic_label: "æœ€é«˜å­¦å†ï¼š",
                acad_none: "æ²¡æœ‰æ­£å¼å­¦å†",
                acad_sec: "ä¸­å­¦æ•™è‚² (HKCEE/HKDSE)",
                acad_deg_other: "å­¦å£«å­¦ä½ï¼ˆå…¶ä»–é¢†åŸŸï¼‰",
                acad_deg_rel: "ä¼šè®¡/å•†ä¸š/ç»æµ/é‡‘è/æ³•å¾‹å­¦å£«å­¦ä½",
                acad_deg_courses: "å­¦å£«å­¦ä½ï¼ˆå…¶ä»–ï¼‰+ 2é—¨ç›¸å…³è¯¾ç¨‹",
                acad_masters: "ç›¸å…³é¢†åŸŸç¡•å£«å­¦ä½",
                acad_mba: "MBA",
                prof_label: "ä¸“ä¸šèµ„æ ¼ï¼š",
                exp_8_label: "è¿‡å»8å¹´ç›¸å…³ç»éªŒï¼š",
                exp_8_help: "5å¹´ä»¥ä¸Š = RIQè±å…",
                exp_6_label: "è¿‡å»6å¹´ç›¸å…³ç»éªŒï¼š",
                exp_6_help: "è´Ÿè´£äººå‘˜éœ€3å¹´ä»¥ä¸Š",
                mgmt_label: "ç®¡ç†ç»éªŒï¼š",
                mgmt_help: "è´Ÿè´£äººå‘˜éœ€2å¹´ä»¥ä¸Š",
                pi_label: "æ˜¯å¦åªæœåŠ¡ä¸“ä¸šæŠ•èµ„è€…ï¼Ÿ",
                s4_title: "ç¬¬å››æ­¥ï¼šè€ƒè¯•è®°å½•", s4_desc: "é€‰æ‹©è¿‡å»3å¹´å†…å·²é€šè¿‡çš„è¯•å·ã€‚",
                lrp_explain_title: "LRPï¼ˆæœ¬åœ°ç›‘ç®¡æ¶æ„è¯•å·ï¼‰",
                lrp_explain_text: "æµ‹è¯•é¦™æ¸¯è¯åˆ¸åŠæœŸè´§å¸‚åœºçš„æ³•è§„çŸ¥è¯†ã€‚<strong>å·ä¸€</strong>ä¸ºé€šç”¨ç›‘ç®¡è¯•å·ï¼Œæ‰€æœ‰æŒç‰Œäººå£«å‡é¡»é€šè¿‡ï¼ˆç¬¬3ã€7ç±»é™¤å¤–ï¼‰ã€‚<strong>å·äºŒè‡³å…­ã€åå…«</strong>ä¸ºä¸“é¡¹ç›‘ç®¡è¯•å·ï¼Œä»…è´Ÿè´£äººå‘˜(RO)é¡»æŒ‰å…¶å—è§„ç®¡æ´»åŠ¨ç±»åˆ«é€šè¿‡ç›¸åº”è¯•å·ã€‚",
                lrp_papers_label: "LRPè¯•å·ï¼ˆç›‘ç®¡ï¼‰ï¼š",
                lrp_papers_help: "å·ä¸€ï¼šé€šç”¨ç›‘ç®¡ | å·äºŒï¼šè¯åˆ¸(1,4,8ç±»RO) | å·ä¸‰ï¼šè¡ç”Ÿå·¥å…·(2,5ç±»RO) | å·å››ï¼šä¿¡è´·è¯„çº§(10ç±»RO) | å·äº”ï¼šæœºæ„èèµ„(6ç±»RO) | å·å…­ï¼šèµ„äº§ç®¡ç†(9ç±»RO) | å·åå…«ï¼šå­˜ç®¡æœåŠ¡(13ç±»RO)",
                riq_explain_title: "RIQï¼ˆè®¤å¯è¡Œä¸šèµ„æ ¼è¯•å·ï¼‰",
                riq_explain_text: "æµ‹è¯•é‡‘èå¸‚åœºåŠäº§å“çš„å®åŠ¡çŸ¥è¯†ã€‚<strong>å·ä¸ƒ</strong>ä¸ºé€šç”¨é‡‘èå¸‚åœºè¯•å·ï¼Œå¤§éƒ¨åˆ†å—è§„ç®¡æ´»åŠ¨å‡é¡»é€šè¿‡ã€‚<strong>å·å…«è‡³åäºŒã€åä¹</strong>ä¸ºä¸“é¡¹äº§å“è¯•å·ï¼Œé¡»æŒ‰å—è§„ç®¡æ´»åŠ¨ç±»åˆ«é€šè¿‡ç›¸åº”è¯•å·ã€‚æŒæœ‰ç›¸å…³å­¦å†æˆ–ä¸“ä¸šèµ„æ ¼ï¼ˆå¦‚CFAï¼‰è€…å¯è·è±å…ã€‚",
                riq_papers_label: "RIQè¯•å·ï¼ˆå®åŠ¡ï¼‰ï¼š",
                riq_papers_help: "å·ä¸ƒï¼šé‡‘èå¸‚åœº(é€šç”¨) | å·å…«ï¼šè¯åˆ¸(1,4,8ç±») | å·ä¹ï¼šè¡ç”Ÿå·¥å…·(2,5ç±») | å·åï¼šä¿¡è´·è¯„çº§(10ç±») | å·åä¸€ï¼šæœºæ„èèµ„(6ç±») | å·åäºŒï¼šèµ„äº§ç®¡ç†(9ç±») | å·åä¹ï¼šå­˜ç®¡æœåŠ¡(13ç±»)",
                add_papers_label: "å…¶ä»–è¯•å·ï¼š",
                p1: "å·ä¸€", p2: "å·äºŒ", p3: "å·ä¸‰", p4: "å·å››", p5: "å·äº”", p6: "å·å…­",
                p7: "å·ä¸ƒ", p8: "å·å…«", p9: "å·ä¹", p10: "å·å", p11: "å·åä¸€", p12: "å·åäºŒ",
                p15: "å·åäº”", p16: "å·åå…­", p17: "å·åä¸ƒ", p18: "å·åå…«", p19: "å·åä¹",
                btn_next1: "ä¸‹ä¸€æ­¥ â†’", btn_next2: "ä¸‹ä¸€æ­¥ â†’", btn_next3: "ä¸‹ä¸€æ­¥ â†’",
                btn_back2: "â† è¿”å›", btn_back3: "â† è¿”å›", btn_back4: "â† è¿”å›",
                btn_calc: "è®¡ç®—ç»“æœ", btn_restart: "é‡æ–°å¼€å§‹",
                result_eligible: "æ‚¨ä¼¼ä¹ç¬¦åˆèµ„æ ¼",
                result_warning: "æœ‰æ¡ä»¶ç¬¦åˆèµ„æ ¼",
                result_not_eligible: "èµ„æ ¼é—®é¢˜",
                papers_required: "éœ€è¦é€šè¿‡çš„è¯•å·",
                papers_exempt: "è·è±å…çš„è¯•å·",
                summary: "æ‘˜è¦",
                papers_to_pass: "éœ€é€šè¿‡è¯•å·ï¼š",
                papers_exempt_count: "è±å…è¯•å·ï¼š",
                cpt_required: "éœ€è¦CPTæ—¶æ•°",
                cpt_before: "å¿…é¡»åœ¨ç”³è¯·å‰å®Œæˆ",
                alert_select: "è¯·é€‰æ‹©è§’è‰²åŠå—è§„ç®¡æ´»åŠ¨ã€‚",
                disclaimer_title: "å…è´£å£°æ˜",
                disclaimer_text: "æœ¬è®¡ç®—å™¨æ ¹æ®è¯ç›‘ä¼šã€Šèƒœä»»èƒ½åŠ›çš„æŒ‡å¼•ã€‹(2024å¹´10æœˆ) æä¾›ä¸€èˆ¬æŒ‡å¼•ã€‚ä¸ªåˆ«æƒ…å†µå¯èƒ½æœ‰æ‰€ä¸åŒã€‚å¦‚éœ€äº†è§£å®˜æ–¹è¦æ±‚ï¼Œè¯·ç›´æ¥å’¨è¯¢è¯ç›‘ä¼šã€‚",
                link_sfc: "è¯ç›‘ä¼šæŒ‡å¼•",
                contact_title: "ğŸ“ è”ç»œæˆ‘ä»¬",
                address_text: "ä¸­ç¯å¾·è¾…é“ä¸­59å·ä¸­å—è¡Œ301å®¤",
                mtr_text: "ä¸­ç¯åœ°é“ç«™Bå‡ºå£",
                hours_title: "åŠå…¬æ—¶é—´",
                hours_days: "æ˜ŸæœŸä¸€è‡³äº”: 9AM-12PM, 1PM-6PM",
                hours_lunch: "ï¼ˆåˆé¥­æ—¶é—´ä¸æä¾›æœåŠ¡ï¼‰",
                // New fields for enhanced exemption logic
                temp_licence_label: "ç”³è¯·ä¸´æ—¶ç‰Œç…§ï¼Ÿ",
                temp_yes: "æ˜¯", temp_no: "å¦",
                never_p1_label: "ä»æœªå°è¯•è¿‡å·ä¸€è€ƒè¯•ï¼Ÿ",
                never_p1_yes: "æ˜¯", never_p1_no: "å¦",
                licensed_hk_exp_label: "æŒç‰Œé¦™æ¸¯ç»éªŒï¼š",
                years_unit5: "å¹´", years_unit6: "å¹´",
                ro_conditional_title: "è´Ÿè´£äººå‘˜æœ‰æ¡ä»¶è±å…ç›¸å…³èµ„æ–™ï¼š",
                schedule3_exp_label: "é™„è¡¨3è®¤å¯äº¤æ˜“æ‰€å¸æ³•ç®¡è¾–åŒºç»éªŒï¼š",
                regulatory_work_label: "è¿‡å»6å¹´å†…å…¨èŒç›‘ç®¡/åˆè§„å·¥ä½œæ»¡3å¹´ï¼Ÿ",
                reg_yes: "æ˜¯", reg_no: "å¦",
                limited_scope_label: "æœ‰é™èŒƒå›´æ´»åŠ¨/é«˜çº§ç®¡ç†äººå‘˜è§’è‰²ï¼Ÿ",
                scope_yes: "æ˜¯", scope_no: "å¦",
                ro_support_label: "è·æŒ‡å®šè´Ÿè´£äººå‘˜ç›‘ç®¡æ”¯æ´ï¼Ÿ",
                support_yes: "æ˜¯", support_no: "å¦",
                lr_conditional_title: "æŒç‰Œä»£è¡¨æœ‰æ¡ä»¶è±å…ç›¸å…³èµ„æ–™ï¼š",
                itinerant_label: "å·¡å›ä¸“ä¸šäººå£«ï¼ˆæ¯å¹´åœ¨æ¸¯å°‘äº30å¤©ï¼‰ï¼Ÿ",
                itin_yes: "æ˜¯", itin_no: "å¦",
                // Help text for conditional exemption fields
                temp_licence_help: "ä¸´æ—¶ç‰Œç…§ç”³è¯·äººå¯è·è±å…RIQåŠLRPè€ƒè¯•è¦æ±‚ï¼ˆä»…é€‚ç”¨äºç¬¬1ã€2ã€4ã€5ã€6ã€10ã€11ç±»ï¼‰ã€‚è¯¦è§ã€ŠæŒ‡å¼•ã€‹4.4.2.1(b)åŠ4.4.3.1(b)ã€‚",
                never_p1_help: "æ ¹æ®ã€ŠæŒ‡å¼•ã€‹4.4.3.7ï¼Œç°æ—¶æˆ–3å¹´å†…æ›¾æŒç‰Œçš„LRè‹¥ä»æœªå°è¯•è¿‡å·ä¸€è€ƒè¯•ï¼Œå¯è·æœ‰æ¡ä»¶è±å…ï¼Œä½†éœ€é¢å¤–å®Œæˆ+5 CPTå°æ—¶ï¼ˆæœ¬åœ°ç›‘ç®¡çŸ¥è¯†ï¼‰ã€‚",
                licensed_hk_exp_help: "åœ¨é¦™æ¸¯æŒæœ‰è¯ç›‘ä¼šç‰Œç…§ä»äº‹å—è§„ç®¡æ´»åŠ¨çš„æ€»å¹´èµ„ã€‚è‹¥æ‚¨ç›®å‰æŒç‰Œä¸ºLRå¹¶ç”³è¯·å‡çº§ä¸ºåŒä¸€ç±»åˆ«çš„ROï¼Œéœ€å…·å¤‡3å¹´ä»¥ä¸ŠæŒç‰Œç»éªŒæ–¹å¯è·æœ‰æ¡ä»¶è±å…LRPè€ƒè¯•ï¼ˆã€ŠæŒ‡å¼•ã€‹4.4.3.4ï¼‰ã€‚",
                schedule3_exp_help: "åœ¨ã€Šè¯åˆ¸åŠæœŸè´§(åœ¨è¯åˆ¸å¸‚åœºä¸Šå¸‚)è§„åˆ™ã€‹é™„è¡¨3æ‰€åˆ—è®¤å¯äº¤æ˜“æ‰€çš„å¸æ³•ç®¡è¾–åŒºï¼ˆå¦‚ç¾å›½ã€è‹±å›½ã€æ—¥æœ¬ã€æ¾³æ´²ã€æ–°åŠ å¡ç­‰ï¼‰ä»äº‹ç›¸å…³å—è§„ç®¡æ´»åŠ¨çš„ç»éªŒå¹´èµ„ã€‚8å¹´ä»¥ä¸Šå¯è·æœ‰æ¡ä»¶è±å…ï¼ˆã€ŠæŒ‡å¼•ã€‹4.4.3.2åŠ4.4.3.5ï¼‰ã€‚",
                regulatory_work_help: "åœ¨é¦™æ¸¯ä»äº‹å…¨èŒç›‘ç®¡æˆ–åˆè§„å·¥ä½œï¼ˆå¦‚åœ¨è¯ç›‘ä¼šã€é‡‘ç®¡å±€ã€ä¿ç›‘å±€æˆ–æŒç‰Œæ³•å›¢çš„åˆè§„éƒ¨é—¨å·¥ä½œï¼‰ã€‚ç¬¦åˆè€…å¯è·å®Œå…¨è±å…LRPè€ƒè¯•ï¼ˆã€ŠæŒ‡å¼•ã€‹4.4.3.1(c)ï¼‰ã€‚",
                limited_scope_help: "æŒ‡ROåªä»äº‹æœ‰é™èŒƒå›´çš„å—è§„ç®¡æ´»åŠ¨ï¼ˆå¦‚ä»…å¤„ç†æœºæ„å®¢æˆ·æˆ–ä¸“ä¸šæŠ•èµ„è€…ä¸šåŠ¡ï¼‰ï¼Œæˆ–æ‹…ä»»é«˜çº§ç®¡ç†äººå‘˜è§’è‰²ï¼ˆå¦‚CEOã€COOï¼‰è€Œéç›´æ¥ä»äº‹å‰çº¿ä¸šåŠ¡ã€‚é€‚ç”¨äºå…·ä¸°å¯Œæµ·å¤–ç»éªŒè€…çš„æœ‰æ¡ä»¶è±å…ï¼ˆã€ŠæŒ‡å¼•ã€‹4.4.3.2ï¼‰ã€‚",
                ro_support_help: "æŒ‡å…¬å¸å·²æŒ‡å®šä¸€åç°æœ‰çš„è´Ÿè´£äººå‘˜ï¼ˆå…·å¤‡å®Œæ•´æœ¬åœ°ç›‘ç®¡çŸ¥è¯†ï¼‰ä¸ºæ‚¨æä¾›ç›‘ç£åŠæ”¯æ´ã€‚è¿™æ˜¯å…·ä¸°å¯Œæµ·å¤–ç»éªŒè€…è·æœ‰æ¡ä»¶è±å…çš„å¿…è¦æ¡ä»¶ï¼ˆã€ŠæŒ‡å¼•ã€‹4.4.3.2ï¼‰ã€‚",
                itinerant_help: "æŒ‡æ¯å¹´åœ¨é¦™æ¸¯é€—ç•™ä¸è¶…è¿‡30å¤©ã€ä¸»è¦åœ¨æµ·å¤–å·¥ä½œçš„ä¸“ä¸šäººå£«ã€‚å·¡å›ä¸“ä¸šäººå£«å¯è·æœ‰æ¡ä»¶è±å…LRPè€ƒè¯•ï¼Œä½†ç‰Œç…§ä¼šé™„å¸¦ç›¸å…³æ¡ä»¶é™åˆ¶å…¶åœ¨æ¸¯æ´»åŠ¨èŒƒå›´ï¼ˆã€ŠæŒ‡å¼•ã€‹4.4.3.6ï¼‰ã€‚",
                // Exemption result translations
                exempt_full: "å®Œå…¨è±å…",
                exempt_conditional: "æœ‰æ¡ä»¶è±å…",
                exempt_reentrant: "é‡è¿”ä¸šç•Œè±å…",
                conditions_title: "æ¡ä»¶ï¼š",
                cpt_additional: "é¢å¤–CPTè¦æ±‚",
                same_riq_same_role: "ç›¸åŒRIQè¦æ±‚ã€ç›¸åŒè§’è‰²",
                same_lrp_same_role: "ç›¸åŒLRPè¦æ±‚ã€ç›¸åŒè§’è‰²",
                different_riq_exp: "ä¸åŒRIQè¦æ±‚ã€5å¹´ä»¥ä¸Šç»éªŒ",
                lr_to_ro_upgrade: "LRå‡çº§ROï¼Œå…·æŒç‰Œé¦™æ¸¯ç»éªŒ",
                foreign_exp_pi: "8å¹´ä»¥ä¸Šæµ·å¤–ç»éªŒï¼ˆé™„è¡¨3ï¼‰ï¼Œä»…é™ä¸“ä¸šæŠ•èµ„è€…",
                itinerant_exemption: "å·¡å›ä¸“ä¸šäººå£«è±å…",
                temp_licence_exemption: "ä¸´æ—¶ç‰Œç…§",
                regulatory_work_exemption: "3å¹´ä»¥ä¸Šé¦™æ¸¯ç›‘ç®¡/åˆè§„å·¥ä½œ",
                condition_cpt_5_industry: "ä¸€æ¬¡æ€§+5 CPTå°æ—¶ï¼ˆè¡Œä¸š/äº§å“çŸ¥è¯†ï¼‰",
                condition_cpt_5_regulatory: "ä¸€æ¬¡æ€§+5 CPTå°æ—¶ï¼ˆæœ¬åœ°ç›‘ç®¡çŸ¥è¯†ï¼‰",
                condition_licensing_conditions: "å¯èƒ½é™„å¸¦ç‰Œç…§æ¡ä»¶",
                condition_limited_scope: "ä»…é™æœ‰é™èŒƒå›´æ´»åŠ¨",
                condition_ro_supervision: "å—æŒ‡å®šè´Ÿè´£äººå‘˜ç›‘ç£",
                condition_pi_only: "ä»…é™ä¸“ä¸šæŠ•èµ„è€…"
            }
        };

        function setLang(l) {
            lang = l;
            document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active'));
            document.getElementById('lang_' + l).classList.add('active');
            const t = texts[l];
            for (const [id, text] of Object.entries(t)) {
                const el = document.getElementById(id);
                if (el) el.textContent = text;
            }
            // Update html lang attribute
            document.documentElement.lang = l === 'tc' ? 'zh-Hant' : l === 'sc' ? 'zh-Hans' : 'en';
        }

        // Navigation
        function nextStep(current) {
            if (current === 1) {
                const role = document.querySelector('input[name="role"]:checked');
                const ra = document.querySelector('input[name="raType"]:checked');
                if (!role || !ra) {
                    alert(texts[lang].alert_select);
                    return;
                }
            }
            document.getElementById('step' + current).classList.remove('active');
            document.getElementById('step' + (current + 1)).classList.add('active');
            window.scrollTo(0, 0);
        }

        function prevStep(current) {
            document.getElementById('step' + current).classList.remove('active');
            document.getElementById('step' + (current - 1)).classList.add('active');
            window.scrollTo(0, 0);
        }

        // Event listeners
        document.querySelectorAll('input[name="currentLicense"]').forEach(r => {
            r.addEventListener('change', function() {
                document.getElementById('currentRAGroup').style.display = this.value === 'yes' ? 'block' : 'none';
                document.getElementById('formerGroup').style.display = this.value === 'no' ? 'block' : 'none';
            });
        });

        document.querySelectorAll('input[name="formerLicense"]').forEach(r => {
            r.addEventListener('change', function() {
                const show = this.value === 'yes';
                document.getElementById('yearsAbsentGroup').style.display = show ? 'block' : 'none';
                document.getElementById('formerRAGroup').style.display = show ? 'block' : 'none';
            });
        });

        // License checkbox event listeners for role toggle visibility
        function setupLicenseRowListeners() {
            document.querySelectorAll('.license-row input[type="checkbox"]').forEach(cb => {
                cb.addEventListener('change', function() {
                    const row = this.closest('.license-row');
                    if (this.checked) {
                        row.classList.add('selected');
                    } else {
                        row.classList.remove('selected');
                    }
                });
                // Also handle clicking on the label
                const row = cb.closest('.license-row');
                const label = row.querySelector('.ra-label');
                if (label) {
                    label.addEventListener('click', function() {
                        cb.checked = !cb.checked;
                        cb.dispatchEvent(new Event('change'));
                    });
                }
            });
        }
        setupLicenseRowListeners();

        // Role selection event listeners - show/hide conditional fields based on role
        document.querySelectorAll('input[name="role"]').forEach(r => {
            r.addEventListener('change', function() {
                const roFields = document.getElementById('roConditionalFields');
                const lrFields = document.getElementById('lrConditionalFields');
                if (this.value === 'RO') {
                    if (roFields) roFields.style.display = 'block';
                    if (lrFields) lrFields.style.display = 'none';
                } else {
                    if (roFields) roFields.style.display = 'none';
                    if (lrFields) lrFields.style.display = 'block';
                }
            });
        });

        // Current license toggle - show/hide "never attempted Paper 1" based on current LR status
        document.querySelectorAll('input[name="currentLicense"]').forEach(r => {
            r.addEventListener('change', function() {
                const neverP1Row = document.getElementById('neverAttemptedP1Row');
                if (neverP1Row) {
                    // Show "never attempted" only if currently licensed as LR
                    const hasCurrentLicense = this.value === 'yes';
                    neverP1Row.style.display = hasCurrentLicense ? 'flex' : 'none';
                }
            });
        });

        // Paper names
        const paperNames = {
            en: { '1':'Paper 1 - Securities & Futures Regulation','2':'Paper 2 - Securities Regulation','3':'Paper 3 - Derivatives Regulation','4':'Paper 4 - Credit Rating Regulation','5':'Paper 5 - Corporate Finance Regulation','6':'Paper 6 - Asset Management Regulation','7':'Paper 7 - Financial Markets','8':'Paper 8 - Securities','9':'Paper 9 - Derivatives','10':'Paper 10 - Credit Rating','11':'Paper 11 - Corporate Finance','12':'Paper 12 - Asset Management','15':'Paper 15 - Sponsors (Principals)','16':'Paper 16 - Sponsors (Representatives)','17':'Paper 17 - Takeovers','18':'Paper 18 - Depositary Regulation','19':'Paper 19 - Depositary Services' },
            tc: { '1':'å·ä¸€ - è­‰åˆ¸åŠæœŸè²¨è¦ä¾‹','2':'å·äºŒ - è­‰åˆ¸è¦ä¾‹','3':'å·ä¸‰ - è¡ç”Ÿå·¥å…·è¦ä¾‹','4':'å·å›› - ä¿¡è²¸è©•ç´šè¦ä¾‹','5':'å·äº” - æ©Ÿæ§‹èè³‡è¦ä¾‹','6':'å·å…­ - è³‡ç”¢ç®¡ç†è¦ä¾‹','7':'å·ä¸ƒ - é‡‘èå¸‚å ´','8':'å·å…« - è­‰åˆ¸','9':'å·ä¹ - è¡ç”Ÿå·¥å…·','10':'å·å - ä¿¡è²¸è©•ç´š','11':'å·åä¸€ - æ©Ÿæ§‹èè³‡','12':'å·åäºŒ - è³‡ç”¢ç®¡ç†','15':'å·åäº” - ä¿è–¦äºº(ä¸»äº‹äºº)','16':'å·åå…­ - ä¿è–¦äºº(ä»£è¡¨)','17':'å·åä¸ƒ - æ”¶è³¼åˆä½µ','18':'å·åå…« - å­˜ç®¡æœå‹™è¦ä¾‹','19':'å·åä¹ - å­˜ç®¡æœå‹™' },
            sc: { '1':'å·ä¸€ - è¯åˆ¸åŠæœŸè´§è§„ä¾‹','2':'å·äºŒ - è¯åˆ¸è§„ä¾‹','3':'å·ä¸‰ - è¡ç”Ÿå·¥å…·è§„ä¾‹','4':'å·å›› - ä¿¡è´·è¯„çº§è§„ä¾‹','5':'å·äº” - æœºæ„èèµ„è§„ä¾‹','6':'å·å…­ - èµ„äº§ç®¡ç†è§„ä¾‹','7':'å·ä¸ƒ - é‡‘èå¸‚åœº','8':'å·å…« - è¯åˆ¸','9':'å·ä¹ - è¡ç”Ÿå·¥å…·','10':'å·å - ä¿¡è´·è¯„çº§','11':'å·åä¸€ - æœºæ„èèµ„','12':'å·åäºŒ - èµ„äº§ç®¡ç†','15':'å·åäº” - ä¿èäºº(ä¸»äº‹äºº)','16':'å·åå…­ - ä¿èäºº(ä»£è¡¨)','17':'å·åä¸ƒ - æ”¶è´­åˆå¹¶','18':'å·åå…« - å­˜ç®¡æœåŠ¡è§„ä¾‹','19':'å·åä¹ - å­˜ç®¡æœåŠ¡' }
        };

        // Exam requirements
        const examReq = {
            RIQ: { '1':['7','8'],'2':['7','9'],'3':[],'4':['7','8'],'5':['7','9'],'6':['7','11'],'7':[],'8':['7','8'],'9':['7','12'],'10':['7','10'],'13':['7','19'] },
            LRP_LR: { '1':['1'],'2':['1'],'3':[],'4':['1'],'5':['1'],'6':['1'],'7':[],'8':['1'],'9':['1'],'10':['1'],'13':['1'] },
            LRP_RO: { '1':['1','2'],'2':['1','3'],'3':[],'4':['1','2'],'5':['1','3'],'6':['1','5'],'7':[],'8':['1','2'],'9':['1','6'],'10':['1','4'],'13':['1','18'] }
        };

        // Same RIQ Requirements Groups (4.4.2.1)
        // RAs in the same group share the same RIQ exam requirements
        const sameRIQGroups = {
            'securities': ['1', '4', '8'],     // Papers 7, 8
            'derivatives': ['2', '5'],          // Papers 7, 9
            'corpfin': ['6'],                   // Papers 7, 11
            'assetmgmt': ['9'],                 // Papers 7, 12
            'creditrating': ['10'],             // Papers 7, 10
            'depositary': ['13'],               // Papers 7, 19
            'noexam': ['3', '7']                // No RIQ
        };

        // Same LRP Requirements Groups for RO (4.4.3.1)
        // RAs in the same group share the same LRP exam requirements for RO
        const sameLRPGroups_RO = {
            'paper2': ['1', '4', '8'],          // Papers 1, 2
            'paper3': ['2', '5'],               // Papers 1, 3
            'paper5': ['6'],                    // Papers 1, 5
            'paper6': ['9'],                    // Papers 1, 6
            'paper4': ['10'],                   // Papers 1, 4
            'paper18': ['13'],                  // Papers 1, 18
            'noexam': ['3', '7']                // No LRP
        };

        // Helper function: Check if two RAs have the same RIQ requirements
        function hasSameRIQRequirements(ra1, ra2) {
            for (const group of Object.values(sameRIQGroups)) {
                if (group.includes(ra1) && group.includes(ra2)) return true;
            }
            return false;
        }

        // Helper function: Check if two RAs have the same LRP requirements for a given role
        function hasSameLRPRequirements(ra1, ra2, role) {
            if (role === 'LR') {
                // All LRs have the same LRP requirements (Paper 1 only, except Type 3, 7)
                const noExamTypes = ['3', '7'];
                if (noExamTypes.includes(ra1) && noExamTypes.includes(ra2)) return true;
                if (!noExamTypes.includes(ra1) && !noExamTypes.includes(ra2)) return true;
                return false;
            }
            // For RO, check the specific groups
            for (const group of Object.values(sameLRPGroups_RO)) {
                if (group.includes(ra1) && group.includes(ra2)) return true;
            }
            return false;
        }

        // Get role for a specific RA from current/former licenses
        function getRoleForRA(ra, prefix) {
            const radioName = `${prefix}Role${ra}`;
            const checked = document.querySelector(`input[name="${radioName}"]:checked`);
            return checked ? checked.value : 'LR';
        }

        // Get all current licenses with roles
        function getCurrentLicensesWithRoles() {
            const licenses = {};
            document.querySelectorAll('input[name="currentRA"]:checked').forEach(cb => {
                const ra = cb.value;
                licenses[ra] = getRoleForRA(ra, 'current');
            });
            return licenses;
        }

        // Get all former licenses with roles
        function getFormerLicensesWithRoles() {
            const licenses = {};
            document.querySelectorAll('input[name="formerRA"]:checked').forEach(cb => {
                const ra = cb.value;
                licenses[ra] = getRoleForRA(ra, 'former');
            });
            return licenses;
        }

        // ==========================================
        // EXEMPTION CHECK FUNCTIONS (SFC Guidelines)
        // ==========================================

        // RIQ Full Exemption (4.4.2.1)
        function checkRIQFullExemption(inputs) {
            const { currentLicense, currentLicenses, formerLicense, formerLicenses,
                    yearsAbsent, applyingRA, applyingRole, tempLicence } = inputs;
            const t = texts[lang];

            // (a) Current licensee with same RIQ requirements and same role
            if (currentLicense) {
                for (const [ra, role] of Object.entries(currentLicenses)) {
                    if (hasSameRIQRequirements(ra, applyingRA) && role === applyingRole) {
                        return { exempt: true, type: 'full', reason: t.same_riq_same_role };
                    }
                }
            }

            // (a) Former licensee within 3 years with same RIQ requirements and same role
            if (formerLicense && yearsAbsent < 3) {
                for (const [ra, role] of Object.entries(formerLicenses)) {
                    if (hasSameRIQRequirements(ra, applyingRA) && role === applyingRole) {
                        return { exempt: true, type: 'full', reason: t.same_riq_same_role };
                    }
                }
            }

            // (b) Temporary licence for RAs 1, 2, 4, 5, 6, 10, 11
            if (tempLicence && ['1','2','4','5','6','10','11'].includes(applyingRA)) {
                return { exempt: true, type: 'full', reason: t.temp_licence_exemption };
            }

            return { exempt: false };
        }

        // RIQ Conditional Exemption (4.4.2.2)
        function checkRIQConditionalExemption(inputs) {
            const { currentLicense, currentLicenses, industryExp, applyingRA, applyingRole } = inputs;
            const t = texts[lang];

            // Current licensee + 5 years local experience in past 8 + different RIQ + same role
            if (currentLicense && industryExp >= 5) {
                for (const [ra, role] of Object.entries(currentLicenses)) {
                    if (!hasSameRIQRequirements(ra, applyingRA) && role === applyingRole) {
                        return {
                            exempt: true,
                            type: 'conditional',
                            reason: t.different_riq_exp,
                            conditions: [
                                t.condition_licensing_conditions,
                                t.condition_cpt_5_industry
                            ]
                        };
                    }
                }
            }

            return { exempt: false };
        }

        // LRP Full Exemption (4.4.3.1)
        function checkLRPFullExemption(inputs) {
            const { currentLicense, currentLicenses, formerLicense, formerLicenses,
                    yearsAbsent, applyingRA, applyingRole, tempLicence, regulatoryWork } = inputs;
            const t = texts[lang];

            // (a) Current licensee with same LRP requirements and same role
            if (currentLicense) {
                for (const [ra, role] of Object.entries(currentLicenses)) {
                    if (hasSameLRPRequirements(ra, applyingRA, applyingRole) && role === applyingRole) {
                        return { exempt: true, type: 'full', reason: t.same_lrp_same_role };
                    }
                }
            }

            // (a) Former licensee within 3 years with same LRP requirements and same role
            if (formerLicense && yearsAbsent < 3) {
                for (const [ra, role] of Object.entries(formerLicenses)) {
                    if (hasSameLRPRequirements(ra, applyingRA, applyingRole) && role === applyingRole) {
                        return { exempt: true, type: 'full', reason: t.same_lrp_same_role };
                    }
                }
            }

            // (b) Temporary licence
            if (tempLicence && ['1','2','4','5','6','10','11'].includes(applyingRA)) {
                return { exempt: true, type: 'full', reason: t.temp_licence_exemption };
            }

            // (c) 3+ years full-time regulatory/compliance work in HK in same RA
            if (regulatoryWork) {
                return { exempt: true, type: 'full', reason: t.regulatory_work_exemption };
            }

            return { exempt: false };
        }

        // LRP Conditional Exemption 1 (4.4.3.2) - RO with substantial foreign experience
        function checkLRPConditionalExemption1(inputs) {
            const { applyingRole, schedule3Exp, industryExp6, limitedScope, roSupport } = inputs;
            const t = texts[lang];

            if (applyingRole !== 'RO') return { exempt: false };

            // 8 years in Schedule 3 jurisdictions OR 6 years Schedule 3 + 2 years HK
            const hasSubstantialForeignExp = schedule3Exp >= 8 || (schedule3Exp >= 6 && industryExp6 >= 2);

            if (hasSubstantialForeignExp && limitedScope && roSupport) {
                return {
                    exempt: true,
                    type: 'conditional',
                    reason: lang === 'en' ? 'Substantial foreign experience' : lang === 'tc' ? 'è±å¯Œæµ·å¤–ç¶“é©—' : 'ä¸°å¯Œæµ·å¤–ç»éªŒ',
                    conditions: [
                        t.condition_limited_scope,
                        t.condition_ro_supervision,
                        t.condition_cpt_5_regulatory
                    ]
                };
            }

            return { exempt: false };
        }

        // LRP Conditional Exemption 2 (4.4.3.3) - RO, 5+ years local, different LRP
        function checkLRPConditionalExemption2(inputs) {
            const { currentLicense, currentLicenses, industryExp, applyingRA, applyingRole } = inputs;
            const t = texts[lang];

            if (applyingRole !== 'RO') return { exempt: false };

            if (currentLicense && industryExp >= 5) {
                for (const [ra, role] of Object.entries(currentLicenses)) {
                    if (!hasSameLRPRequirements(ra, applyingRA, 'RO') && role === 'RO') {
                        return {
                            exempt: true,
                            type: 'conditional',
                            reason: lang === 'en' ? 'Different LRP requirements, 5+ years experience' : lang === 'tc' ? 'ä¸åŒLRPè¦æ±‚ã€5å¹´ä»¥ä¸Šç¶“é©—' : 'ä¸åŒLRPè¦æ±‚ã€5å¹´ä»¥ä¸Šç»éªŒ',
                            conditions: [
                                t.condition_licensing_conditions,
                                t.condition_cpt_5_regulatory
                            ]
                        };
                    }
                }
            }

            return { exempt: false };
        }

        // LRP Conditional Exemption 3 (4.4.3.4) - LR to RO upgrade
        function checkLRPConditionalExemption3(inputs) {
            const { currentLicense, currentLicenses, applyingRA, applyingRole, licensedHKExp } = inputs;
            const t = texts[lang];

            if (applyingRole !== 'RO') return { exempt: false };

            if (currentLicense) {
                // Check if currently LR for the same RA
                const currentRoleForApplyingRA = currentLicenses[applyingRA];
                if (currentRoleForApplyingRA === 'LR' && licensedHKExp >= 3) {
                    return {
                        exempt: true,
                        type: 'conditional',
                        reason: t.lr_to_ro_upgrade,
                        conditions: [t.condition_cpt_5_regulatory]
                    };
                }
            }

            return { exempt: false };
        }

        // LRP Conditional Exemption 4 (4.4.3.5) - RO with 8+ years foreign experience, PI only
        function checkLRPConditionalExemption4(inputs) {
            const { applyingRole, schedule3Exp, piOnly } = inputs;
            const t = texts[lang];

            if (applyingRole !== 'RO') return { exempt: false };

            if (schedule3Exp >= 8 && piOnly) {
                return {
                    exempt: true,
                    type: 'conditional',
                    reason: t.foreign_exp_pi,
                    conditions: [
                        t.condition_pi_only,
                        t.condition_cpt_5_regulatory
                    ]
                };
            }

            return { exempt: false };
        }

        // LRP Conditional Exemption 5 (4.4.3.6) - LR Itinerant professional
        function checkLRPConditionalExemption5(inputs) {
            const { applyingRole, itinerant } = inputs;
            const t = texts[lang];

            if (applyingRole !== 'LR') return { exempt: false };

            if (itinerant) {
                return {
                    exempt: true,
                    type: 'conditional',
                    reason: t.itinerant_exemption,
                    conditions: [
                        lang === 'en' ? 'Maximum 30 days per year in Hong Kong' : lang === 'tc' ? 'æ¯å¹´åœ¨æ¸¯ä¸è¶…é30å¤©' : 'æ¯å¹´åœ¨æ¸¯ä¸è¶…è¿‡30å¤©'
                    ]
                };
            }

            return { exempt: false };
        }

        // LRP Conditional Exemption 6 (4.4.3.7) - LR, current/former, never attempted Paper 1 OR different LRP
        function checkLRPConditionalExemption6(inputs) {
            const { currentLicense, currentLicenses, formerLicense, formerLicenses,
                    yearsAbsent, applyingRA, applyingRole, neverAttemptedP1 } = inputs;
            const t = texts[lang];

            if (applyingRole !== 'LR') return { exempt: false };

            const isCurrentOrRecentFormer = currentLicense || (formerLicense && yearsAbsent < 3);

            if (isCurrentOrRecentFormer) {
                const licenses = currentLicense ? currentLicenses : formerLicenses;
                for (const [ra, role] of Object.entries(licenses)) {
                    if (role === 'LR') {
                        // Never attempted Paper 1
                        if (neverAttemptedP1) {
                            return {
                                exempt: true,
                                type: 'conditional',
                                reason: lang === 'en' ? 'Never attempted Paper 1' : lang === 'tc' ? 'å¾æœªå˜—è©¦éå·ä¸€' : 'ä»æœªå°è¯•è¿‡å·ä¸€',
                                conditions: [t.condition_cpt_5_regulatory]
                            };
                        }
                        // Different LRP requirements
                        if (!hasSameLRPRequirements(ra, applyingRA, 'LR')) {
                            return {
                                exempt: true,
                                type: 'conditional',
                                reason: lang === 'en' ? 'Different LRP requirements' : lang === 'tc' ? 'ä¸åŒLRPè¦æ±‚' : 'ä¸åŒLRPè¦æ±‚',
                                conditions: [t.condition_cpt_5_regulatory]
                            };
                        }
                    }
                }
            }

            return { exempt: false };
        }

        // Re-entrant Exemption (4.4.4.1)
        function checkReentrantExemption(inputs) {
            const { formerLicense, formerLicenses, yearsAbsent, applyingRA, applyingRole } = inputs;
            const t = texts[lang];

            if (!formerLicense) return { exempt: false };
            if (yearsAbsent < 3 || yearsAbsent > 8) return { exempt: false };

            for (const [ra, role] of Object.entries(formerLicenses)) {
                if (hasSameRIQRequirements(ra, applyingRA) &&
                    hasSameLRPRequirements(ra, applyingRA, applyingRole) &&
                    role === applyingRole) {
                    const cptHours = Math.ceil(yearsAbsent) * 5;
                    return {
                        exempt: true,
                        type: 'reentrant',
                        reason: lang === 'en' ? `Former licensee (${yearsAbsent} years absent)` : lang === 'tc' ? `æ›¾æŒç‰Œï¼ˆé›¢é–‹${yearsAbsent}å¹´ï¼‰` : `æ›¾æŒç‰Œï¼ˆç¦»å¼€${yearsAbsent}å¹´ï¼‰`,
                        cptHours: cptHours,
                        conditions: [
                            lang === 'en' ? `${cptHours} CPT hours required (at least 50% local regulatory)` : lang === 'tc' ? `éœ€${cptHours} CPTå°æ™‚ï¼ˆè‡³å°‘50%æœ¬åœ°ç›£ç®¡ï¼‰` : `éœ€${cptHours} CPTå°æ—¶ï¼ˆè‡³å°‘50%æœ¬åœ°ç›‘ç®¡ï¼‰`,
                            lang === 'en' ? 'Must complete before application submission' : lang === 'tc' ? 'å¿…é ˆåœ¨ç”³è«‹å‰å®Œæˆ' : 'å¿…é¡»åœ¨ç”³è¯·å‰å®Œæˆ'
                        ]
                    };
                }
            }

            return { exempt: false };
        }

        // 2CExam Product Database
        const products = {
            '1': {
                printedQB: 'https://2cexam.com.hk/hksi-le-paper-1-pass-paper-question-bank/',
                onlineQB: 'https://hksiiiqepasspaper.online/product/hksip1eonline/?lang=en',
                bible: 'https://2cexam.com.hk/hksi-le-paper-1-pass-paper-bible/',
                hasBible: true
            },
            '2': {
                printedQB: 'https://2cexam.com.hk/hksi-le-paper-2-pass-paper-question-bank/',
                onlineQB: 'https://hksiiiqepasspaper.online/product/hksip2eonline/?lang=en',
                bible: 'https://2cexam.com.hk/hk/hksi-le-paper-2-pass-paper-bible/',
                hasBible: true
            },
            '3': {
                printedQB: 'https://2cexam.com.hk/hksi-le-paper-3-pass-paper-question-bank/',
                onlineQB: 'https://hksiiiqepasspaper.online/product/hksip3eonline/?lang=en',
                hasBible: false
            },
            '5': {
                printedQB: 'https://2cexam.com.hk/hksi-le-paper-5-pass-paper-question-bank/',
                onlineQB: 'https://hksiiiqepasspaper.online/product/hksip5eonline/?lang=en',
                hasBible: false
            },
            '6': {
                printedQB: 'https://2cexam.com.hk/hk/hksi-le-paper-6-pass-paper-question-bank/',
                onlineQB: 'https://hksiiiqepasspaper.online/product/hksip6eonline/?lang=en',
                bible: 'https://2cexam.com.hk/hk/hksi-le-paper-6-pass-paper-bible/',
                hasBible: true
            },
            '7': {
                printedQB: 'https://2cexam.com.hk/hk/hksi-le-paper-7-pass-paper-question-bank/',
                onlineQB: 'https://hksiiiqepasspaper.online/product/hksip7eonline/?lang=en',
                bible: 'https://2cexam.com.hk/hk/hksi-le-paper-7-pass-paper-bible/',
                hasBible: true
            },
            '8': {
                printedQB: 'https://2cexam.com.hk/hk/hksi-le-paper-8-pass-paper-question-bank/',
                onlineQB: 'https://hksiiiqepasspaper.online/product/hksip8eonline/?lang=en',
                bible: 'https://2cexam.com.hk/hk/hksi-le-paper-8-pass-paper-bible/',
                hasBible: true
            },
            '9': {
                printedQB: 'https://2cexam.com.hk/hk/hksi-le-paper-9-pass-paper-question-bank/',
                onlineQB: 'https://hksiiiqepasspaper.online/product/hksip9eonline/?lang=en',
                hasBible: false
            },
            '12': {
                printedQB: 'https://2cexam.com.hk/hksi-le-paper-12-pass-paper-question-bank/',
                onlineQB: 'https://hksiiiqepasspaper.online/product/hksip12eonline/?lang=en',
                bible: 'https://2cexam.com.hk/hk/hksi-le-paper-12-pass-paper-bible/',
                hasBible: true
            }
        };

        // Product text translations
        const productTexts = {
            en: {
                title: 'ğŸ“š Study Materials from 2CExam',
                subtitle: 'Get our exam preparation materials with 100% Money-Back Guarantee!',
                paperTitle: 'Paper',
                printedQB: 'ğŸ“– Printed Question Bank',
                onlineQB: 'ğŸ’» Online Question Bank',
                bible: 'ğŸ“• Study Bible (Chinese)',
                moneyback: 'ğŸ’¯ Money-Back Guarantee',
                instantAccess: 'âš¡ Instant Access',
                pricing: 'ğŸ’¼ Pricing',
                priceEN: 'English version: HK$2,500/book',
                priceCN: 'Chinese version: HK$1,500/book',
                payment: 'ğŸ’³ Payment Methods',
                payOnline: 'Online: Credit Card / PayPal',
                payOffice: 'Office: Cash / FPS / Alipay / Cheque',
                delivery: 'ğŸšš Delivery',
                deliveryOnline: 'Online versions: Instant access',
                deliveryPrint: 'Printed versions: SF Express or pickup',
                cta: 'ğŸ“ Need tutoring? Contact us!',
                buyNow: 'Buy Now'
            },
            tc: {
                title: 'ğŸ“š 2CExam è€ƒè©¦æº«ç¿’ææ–™',
                subtitle: 'æˆ‘å€‘çš„è€ƒè©¦æº–å‚™ææ–™äº«æœ‰100%é€€æ¬¾ä¿è­‰ï¼',
                paperTitle: 'å·',
                printedQB: 'ğŸ“– å¯¦é«”ç‰ˆæ¨¡æ“¬è©¦é¡Œ',
                onlineQB: 'ğŸ’» ç¶²ä¸Šç‰ˆæ¨¡æ“¬è©¦é¡Œ',
                bible: 'ğŸ“• å¤©æ›¸ï¼ˆä¸­æ–‡ï¼‰',
                moneyback: 'ğŸ’¯ é€€æ¬¾ä¿è­‰',
                instantAccess: 'âš¡ å³æ™‚é–‹é€š',
                pricing: 'ğŸ’¼ åƒ¹æ ¼',
                priceEN: 'è‹±æ–‡ç‰ˆï¼šHK$2,500/æœ¬',
                priceCN: 'ä¸­æ–‡ç‰ˆï¼šHK$1,500/æœ¬',
                payment: 'ğŸ’³ ä»˜æ¬¾æ–¹å¼',
                payOnline: 'ç¶²ä¸Šè³¼è²·ï¼šä¿¡ç”¨å¡ / PayPal',
                payOffice: 'é–€å¸‚è³¼è²·ï¼šç¾é‡‘ / è½‰æ•¸å¿« / æ”¯ä»˜å¯¶ / æ”¯ç¥¨',
                delivery: 'ğŸšš é…é€æ–¹å¼',
                deliveryOnline: 'ç¶²ä¸Šç‰ˆï¼šæˆåŠŸè³¼è²·å¾Œå³æ™‚é–‹é€š',
                deliveryPrint: 'å¯¦é«”ç‰ˆï¼šé †è±é€Ÿéæˆ–é–€å¸‚è‡ªå–',
                cta: 'ğŸ“ éœ€è¦ç§äººè£œç¿’ï¼Ÿæ­¡è¿è¯ç¹«æˆ‘å€‘ï¼',
                buyNow: 'ç«‹å³è³¼è²·'
            },
            sc: {
                title: 'ğŸ“š 2CExam è€ƒè¯•æ¸©ä¹ ææ–™',
                subtitle: 'æˆ‘ä»¬çš„è€ƒè¯•å‡†å¤‡ææ–™äº«æœ‰100%é€€æ¬¾ä¿è¯ï¼',
                paperTitle: 'å·',
                printedQB: 'ğŸ“– å®ä½“ç‰ˆæ¨¡æ‹Ÿè¯•é¢˜',
                onlineQB: 'ğŸ’» ç½‘ä¸Šç‰ˆæ¨¡æ‹Ÿè¯•é¢˜',
                bible: 'ğŸ“• å¤©ä¹¦ï¼ˆä¸­æ–‡ï¼‰',
                moneyback: 'ğŸ’¯ é€€æ¬¾ä¿è¯',
                instantAccess: 'âš¡ å³æ—¶å¼€é€š',
                pricing: 'ğŸ’¼ ä»·æ ¼',
                priceEN: 'è‹±æ–‡ç‰ˆï¼šHK$2,500/æœ¬',
                priceCN: 'ä¸­æ–‡ç‰ˆï¼šHK$1,500/æœ¬',
                payment: 'ğŸ’³ ä»˜æ¬¾æ–¹å¼',
                payOnline: 'ç½‘ä¸Šè´­ä¹°ï¼šä¿¡ç”¨å¡ / PayPal',
                payOffice: 'é—¨åº—è´­ä¹°ï¼šç°é‡‘ / è½¬æ•°å¿« / æ”¯ä»˜å® / æ”¯ç¥¨',
                delivery: 'ğŸšš é…é€æ–¹å¼',
                deliveryOnline: 'ç½‘ä¸Šç‰ˆï¼šæˆåŠŸè´­ä¹°åå³æ—¶å¼€é€š',
                deliveryPrint: 'å®ä½“ç‰ˆï¼šé¡ºä¸°é€Ÿé€’æˆ–é—¨åº—è‡ªå–',
                cta: 'ğŸ“ éœ€è¦ç§äººè¡¥ä¹ ï¼Ÿæ¬¢è¿è”ç³»æˆ‘ä»¬ï¼',
                buyNow: 'ç«‹å³è´­ä¹°'
            }
        };

        // SFC Information translations
        const sfcTexts = {
            en: {
                sfcTitle: 'ğŸ“‹ SFC Licensing Information',
                guidelinesTitle: 'Guidelines on Competence',
                guidelinesDesc: 'The SFC Guidelines on Competence (October 2024) set out the competence requirements for licensed representatives and responsible officers.',
                guidelinesLink: 'https://www.sfc.hk/en/rules-and-standards/codes-and-guidelines/guidelines/guidelines-on-competence',
                viewGuidelines: 'View Official Guidelines',
                contactTitle: 'ğŸ“ Contact SFC Licensing Department',
                address: 'Securities and Futures Commission\n54/F, One Island East\n18 Westlands Road, Quarry Bay\nHong Kong',
                hotline: 'Licensing Hotline: (852) 2231 1222',
                fax: 'Fax: (852) 2521 7836',
                email: 'Email: licensing@sfc.hk',
                website: 'Website: www.sfc.hk',
                hours: 'Office Hours: Mon-Fri 9:00am - 5:30pm',
                enquiry: 'Online Licensing Enquiry',
                enquiryLink: 'https://www.sfc.hk/en/faqs/licensing-enquiries'
            },
            tc: {
                sfcTitle: 'ğŸ“‹ è­‰ç›£æœƒç™¼ç‰Œè³‡è¨Š',
                guidelinesTitle: 'å‹ä»»èƒ½åŠ›çš„æŒ‡å¼•',
                guidelinesDesc: 'è­‰ç›£æœƒã€Šå‹ä»»èƒ½åŠ›çš„æŒ‡å¼•ã€‹(2024å¹´10æœˆ) åˆ—æ˜æŒç‰Œä»£è¡¨åŠè² è²¬äººå“¡çš„å‹ä»»èƒ½åŠ›è¦æ±‚ã€‚',
                guidelinesLink: 'https://www.sfc.hk/TC/rules-and-standards/codes-and-guidelines/guidelines/guidelines-on-competence',
                viewGuidelines: 'æŸ¥çœ‹å®˜æ–¹æŒ‡å¼•',
                contactTitle: 'ğŸ“ è¯ç¹«è­‰ç›£æœƒç™¼ç‰Œç§‘',
                address: 'è­‰åˆ¸åŠæœŸè²¨äº‹å‹™ç›£å¯Ÿå§”å“¡æœƒ\né¦™æ¸¯é°‚é­šæ¶Œè¯è˜­è·¯18è™Ÿ\næ¸¯å³¶æ±ä¸­å¿ƒ54æ¨“',
                hotline: 'ç™¼ç‰Œç†±ç·šï¼š(852) 2231 1222',
                fax: 'å‚³çœŸï¼š(852) 2521 7836',
                email: 'é›»éƒµï¼šlicensing@sfc.hk',
                website: 'ç¶²å€ï¼šwww.sfc.hk',
                hours: 'è¾¦å…¬æ™‚é–“ï¼šæ˜ŸæœŸä¸€è‡³äº” ä¸Šåˆ9æ™‚è‡³ä¸‹åˆ5æ™‚30åˆ†',
                enquiry: 'ç¶²ä¸Šç™¼ç‰ŒæŸ¥è©¢',
                enquiryLink: 'https://www.sfc.hk/TC/faqs/licensing-enquiries'
            },
            sc: {
                sfcTitle: 'ğŸ“‹ è¯ç›‘ä¼šå‘ç‰Œèµ„è®¯',
                guidelinesTitle: 'èƒœä»»èƒ½åŠ›çš„æŒ‡å¼•',
                guidelinesDesc: 'è¯ç›‘ä¼šã€Šèƒœä»»èƒ½åŠ›çš„æŒ‡å¼•ã€‹(2024å¹´10æœˆ) åˆ—æ˜æŒç‰Œä»£è¡¨åŠè´Ÿè´£äººå‘˜çš„èƒœä»»èƒ½åŠ›è¦æ±‚ã€‚',
                guidelinesLink: 'https://www.sfc.hk/TC/rules-and-standards/codes-and-guidelines/guidelines/guidelines-on-competence',
                viewGuidelines: 'æŸ¥çœ‹å®˜æ–¹æŒ‡å¼•',
                contactTitle: 'ğŸ“ è”ç³»è¯ç›‘ä¼šå‘ç‰Œç§‘',
                address: 'è¯åˆ¸åŠæœŸè´§äº‹åŠ¡ç›‘å¯Ÿå§”å‘˜ä¼š\né¦™æ¸¯ï¿½çš„é±¼æ¶Œåå…°è·¯18å·\næ¸¯å²›ä¸œä¸­å¿ƒ54æ¥¼',
                hotline: 'å‘ç‰Œçƒ­çº¿ï¼š(852) 2231 1222',
                fax: 'ä¼ çœŸï¼š(852) 2521 7836',
                email: 'ç”µé‚®ï¼šlicensing@sfc.hk',
                website: 'ç½‘å€ï¼šwww.sfc.hk',
                hours: 'åŠå…¬æ—¶é—´ï¼šæ˜ŸæœŸä¸€è‡³äº” ä¸Šåˆ9æ—¶è‡³ä¸‹åˆ5æ—¶30åˆ†',
                enquiry: 'ç½‘ä¸Šå‘ç‰ŒæŸ¥è¯¢',
                enquiryLink: 'https://www.sfc.hk/TC/faqs/licensing-enquiries'
            }
        };

        function generateProductRecommendations(requiredPapers) {
            if (requiredPapers.length === 0) return '';

            const pt = productTexts[lang];
            const pn = paperNames[lang];
            let html = `<div class="card" style="border:2px solid var(--primary);margin-top:20px;">
                <div class="card-header" style="background:linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);color:white;">
                    <h2 style="color:white;">${pt.title}</h2>
                    <p style="color:rgba(255,255,255,0.9);">${pt.subtitle}</p>
                </div>
                <div class="card-body">`;

            requiredPapers.forEach(paper => {
                const p = products[paper.p];
                if (!p) return;

                html += `<div style="background:var(--gray-100);border-radius:8px;padding:15px;margin-bottom:15px;">
                    <h4 style="color:var(--primary);margin-bottom:10px;">${pt.paperTitle} ${paper.p} - ${pn[paper.p]?.split(' - ')[1] || ''}</h4>
                    <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:10px;">
                        <a href="${p.printedQB}" target="_blank" class="btn btn-primary" style="text-decoration:none;text-align:center;font-size:0.85rem;">
                            ${pt.printedQB}<br><small>${pt.moneyback}</small>
                        </a>
                        <a href="${p.onlineQB}" target="_blank" class="btn btn-secondary" style="text-decoration:none;text-align:center;font-size:0.85rem;">
                            ${pt.onlineQB}<br><small>${pt.instantAccess}</small>
                        </a>
                        ${p.hasBible ? `<a href="${p.bible}" target="_blank" class="btn btn-primary" style="text-decoration:none;text-align:center;font-size:0.85rem;">
                            ${pt.bible}<br><small>${pt.moneyback}</small>
                        </a>` : ''}
                    </div>
                </div>`;
            });

            html += `<div style="background:#fff8e1;border-radius:8px;padding:15px;margin-top:15px;">
                <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:15px;">
                    <div>
                        <strong>${pt.pricing}</strong><br>
                        <small>â€¢ ${pt.priceEN}<br>â€¢ ${pt.priceCN}</small>
                    </div>
                    <div>
                        <strong>${pt.payment}</strong><br>
                        <small>â€¢ ${pt.payOnline}<br>â€¢ ${pt.payOffice}</small>
                    </div>
                    <div>
                        <strong>${pt.delivery}</strong><br>
                        <small>â€¢ ${pt.deliveryOnline}<br>â€¢ ${pt.deliveryPrint}</small>
                    </div>
                </div>
                <p style="margin-top:15px;text-align:center;font-weight:600;color:var(--primary);">${pt.cta}</p>
            </div>`;

            html += '</div></div>';
            return html;
        }

        function generateSFCInfo() {
            const st = sfcTexts[lang];
            return `<div class="card" style="margin-top:20px;">
                <div class="card-header" style="background:#1a237e;color:white;">
                    <h2 style="color:white;">${st.sfcTitle}</h2>
                </div>
                <div class="card-body">
                    <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:20px;">
                        <div>
                            <h4 style="color:var(--secondary);margin-bottom:10px;">ğŸ“– ${st.guidelinesTitle}</h4>
                            <p style="font-size:0.9rem;color:var(--gray-600);margin-bottom:15px;">${st.guidelinesDesc}</p>
                            <a href="${st.guidelinesLink}" target="_blank" class="btn btn-primary" style="text-decoration:none;">
                                ${st.viewGuidelines} â†’
                            </a>
                        </div>
                        <div>
                            <h4 style="color:var(--secondary);margin-bottom:10px;">${st.contactTitle}</h4>
                            <div style="font-size:0.85rem;line-height:1.8;">
                                <p style="white-space:pre-line;">ğŸ“ ${st.address}</p>
                                <p>ğŸ“ ${st.hotline}</p>
                                <p>ğŸ“  ${st.fax}</p>
                                <p>âœ‰ï¸ ${st.email}</p>
                                <p>ğŸŒ ${st.website}</p>
                                <p>ğŸ• ${st.hours}</p>
                            </div>
                            <a href="${st.enquiryLink}" target="_blank" class="btn btn-secondary" style="text-decoration:none;margin-top:10px;">
                                ${st.enquiry} â†’
                            </a>
                        </div>
                    </div>
                </div>
            </div>`;
        }

        function calculate() {
            const t = texts[lang];
            const role = document.querySelector('input[name="role"]:checked')?.value || 'LR';
            const raType = document.querySelector('input[name="raType"]:checked')?.value || '1';
            const currentLic = document.querySelector('input[name="currentLicense"]:checked')?.value || 'no';
            const formerLic = document.querySelector('input[name="formerLicense"]:checked')?.value || 'no';
            const yearsAbsent = parseFloat(document.getElementById('yearsAbsent')?.value) || 0;
            const academicQual = document.getElementById('academicQual')?.value || 'none';
            const industryExp = parseFloat(document.getElementById('industryExp')?.value) || 0;
            const industryExp6 = parseFloat(document.getElementById('industryExp6')?.value) || 0;
            const managementExp = parseFloat(document.getElementById('managementExp')?.value) || 0;
            const piOnly = document.querySelector('input[name="piOnly"]:checked')?.value === 'yes';

            // New fields for enhanced exemption logic
            const tempLicence = document.querySelector('input[name="tempLicence"]:checked')?.value === 'yes';
            const neverAttemptedP1 = document.querySelector('input[name="neverAttemptedP1"]:checked')?.value === 'yes';
            const licensedHKExp = parseFloat(document.getElementById('licensedHKExp')?.value) || 0;
            const schedule3Exp = parseFloat(document.getElementById('schedule3Exp')?.value) || 0;
            const regulatoryWork = document.querySelector('input[name="regulatoryWork"]:checked')?.value === 'yes';
            const limitedScope = document.querySelector('input[name="limitedScope"]:checked')?.value === 'yes';
            const roSupport = document.querySelector('input[name="roSupport"]:checked')?.value === 'yes';
            const itinerant = document.querySelector('input[name="itinerant"]:checked')?.value === 'yes';

            const profQuals = Array.from(document.querySelectorAll('input[name="profQual"]:checked')).map(c => c.value);
            const passedPapers = Array.from(document.querySelectorAll('input[name="passedPapers"]:checked')).map(c => c.value);

            // Get current and former licenses WITH their roles
            const currentLicenses = getCurrentLicensesWithRoles();
            const formerLicenses = getFormerLicensesWithRoles();
            const currentLicense = currentLic === 'yes' && Object.keys(currentLicenses).length > 0;
            const formerLicense = formerLic === 'yes' && Object.keys(formerLicenses).length > 0;

            let eligibility = { ok: true, reasons: [], warnings: [] };
            let required = [], exempt = [], cptHours = 0, notes = [];
            let conditionalExemptions = []; // Track conditional exemptions with their conditions

            // Build inputs object for exemption functions
            const inputs = {
                currentLicense,
                currentLicenses,
                formerLicense,
                formerLicenses,
                yearsAbsent,
                applyingRA: raType,
                applyingRole: role,
                tempLicence,
                regulatoryWork,
                industryExp,
                industryExp6,
                schedule3Exp,
                limitedScope,
                roSupport,
                piOnly,
                itinerant,
                licensedHKExp,
                neverAttemptedP1
            };

            // Type 7 - no exam
            if (raType === '7') {
                notes.push(lang === 'en' ? 'Type 7 has no RIQ or LRP requirements.' : lang === 'tc' ? 'ç¬¬7é¡æ²’æœ‰RIQæˆ–LRPè¦æ±‚ã€‚' : 'ç¬¬7ç±»æ²¡æœ‰RIQæˆ–LRPè¦æ±‚ã€‚');
            } else if (raType === '3') {
                eligibility.warnings.push(lang === 'en' ? 'Type 3 not covered by HKSI exams. Consult SFC.' : lang === 'tc' ? 'ç¬¬3é¡ä¸åŒ…æ‹¬åœ¨HKSIè€ƒè©¦ã€‚è«‹è«®è©¢è­‰ç›£æœƒã€‚' : 'ç¬¬3ç±»ä¸åŒ…æ‹¬åœ¨HKSIè€ƒè¯•ã€‚è¯·å’¨è¯¢è¯ç›‘ä¼šã€‚');
            } else {
                const lrp = role === 'RO' ? (examReq.LRP_RO[raType] || []) : (examReq.LRP_LR[raType] || []);
                const riq = examReq.RIQ[raType] || [];

                // ==========================================
                // RIQ EXEMPTION CHECKS (in priority order)
                // ==========================================
                let riqExemptionResult = { exempt: false };

                // 1. Check if passed papers
                // (handled individually per paper below)

                // 2. Check RIQ Full Exemption (4.4.2.1)
                riqExemptionResult = checkRIQFullExemption(inputs);

                // 3. If no full exemption, check Re-entrant Exemption (4.4.4.1)
                if (!riqExemptionResult.exempt) {
                    riqExemptionResult = checkReentrantExemption(inputs);
                    if (riqExemptionResult.exempt && riqExemptionResult.cptHours) {
                        cptHours = Math.max(cptHours, riqExemptionResult.cptHours);
                    }
                }

                // 4. If still no exemption, check RIQ Conditional Exemption (4.4.2.2)
                if (!riqExemptionResult.exempt) {
                    riqExemptionResult = checkRIQConditionalExemption(inputs);
                    if (riqExemptionResult.exempt && riqExemptionResult.conditions) {
                        conditionalExemptions.push({
                            type: 'RIQ',
                            reason: riqExemptionResult.reason,
                            conditions: riqExemptionResult.conditions
                        });
                    }
                }

                // 5. Check academic/professional qualifications for RIQ exemption (always applicable)
                if (!riqExemptionResult.exempt) {
                    if (['degreeRelevant','masters','mba'].includes(academicQual)) {
                        riqExemptionResult = { exempt: true, type: 'full', reason: lang === 'en' ? 'Relevant degree' : lang === 'tc' ? 'ç›¸é—œå­¸ä½' : 'ç›¸å…³å­¦ä½' };
                    } else if (profQuals.some(q => ['CFA','CIIA','CFP'].includes(q))) {
                        riqExemptionResult = { exempt: true, type: 'full', reason: 'CFA/CIIA/CFP' };
                    } else if (industryExp >= 5) {
                        riqExemptionResult = { exempt: true, type: 'full', reason: lang === 'en' ? '5+ years experience' : lang === 'tc' ? '5å¹´ä»¥ä¸Šç¶“é©—' : '5å¹´ä»¥ä¸Šç»éªŒ' };
                    } else if (piOnly && industryExp >= 8 && raType === '9') {
                        riqExemptionResult = { exempt: true, type: 'full', reason: lang === 'en' ? '8+ years (PI only)' : lang === 'tc' ? '8å¹´ä»¥ä¸Šç¶“é©—(å°ˆæ¥­æŠ•è³‡è€…)' : '8å¹´ä»¥ä¸Šç»éªŒ(ä¸“ä¸šæŠ•èµ„è€…)' };
                    }
                }

                // ==========================================
                // LRP EXEMPTION CHECKS (in priority order)
                // ==========================================
                let lrpExemptionResult = { exempt: false };

                // 1. Check LRP Full Exemption (4.4.3.1)
                lrpExemptionResult = checkLRPFullExemption(inputs);

                // 2. If no full exemption, check Re-entrant Exemption (4.4.4.1)
                if (!lrpExemptionResult.exempt) {
                    const reentrantResult = checkReentrantExemption(inputs);
                    if (reentrantResult.exempt) {
                        lrpExemptionResult = reentrantResult;
                        if (reentrantResult.cptHours) {
                            cptHours = Math.max(cptHours, reentrantResult.cptHours);
                        }
                        if (reentrantResult.conditions) {
                            conditionalExemptions.push({
                                type: 'Re-entrant',
                                reason: reentrantResult.reason,
                                conditions: reentrantResult.conditions
                            });
                        }
                    }
                }

                // 3. Check LRP Conditional Exemptions (only if no full exemption)
                if (!lrpExemptionResult.exempt) {
                    // Check each conditional exemption in order
                    const conditionalChecks = [
                        checkLRPConditionalExemption3, // LR to RO upgrade (most common case for the bug)
                        checkLRPConditionalExemption1, // Substantial foreign experience
                        checkLRPConditionalExemption2, // Different LRP, 5+ years
                        checkLRPConditionalExemption4, // Foreign exp, PI only
                        checkLRPConditionalExemption5, // Itinerant (LR only)
                        checkLRPConditionalExemption6  // Never attempted P1 or different LRP (LR only)
                    ];

                    for (const checkFn of conditionalChecks) {
                        const result = checkFn(inputs);
                        if (result.exempt) {
                            lrpExemptionResult = result;
                            if (result.conditions) {
                                conditionalExemptions.push({
                                    type: 'LRP',
                                    reason: result.reason,
                                    conditions: result.conditions
                                });
                            }
                            break;
                        }
                    }
                }

                // ==========================================
                // PROCESS RIQ PAPERS
                // ==========================================
                riq.forEach(p => {
                    if (passedPapers.includes(p)) {
                        exempt.push({
                            p,
                            r: lang === 'en' ? 'Passed' : lang === 'tc' ? 'å·²é€šé' : 'å·²é€šè¿‡',
                            type: 'full'
                        });
                    } else if (riqExemptionResult.exempt) {
                        exempt.push({
                            p,
                            r: riqExemptionResult.reason,
                            type: riqExemptionResult.type || 'full',
                            conditions: riqExemptionResult.conditions
                        });
                    } else {
                        required.push({p, t: 'RIQ'});
                    }
                });

                // ==========================================
                // PROCESS LRP PAPERS
                // ==========================================
                lrp.forEach(p => {
                    // Check if already passed
                    if (passedPapers.includes(p)) {
                        exempt.push({
                            p,
                            r: lang === 'en' ? 'Passed' : lang === 'tc' ? 'å·²é€šé' : 'å·²é€šè¿‡',
                            type: 'full'
                        });
                    }
                    // Paper 1 special handling - always exempt if currently licensed
                    else if (p === '1' && currentLicense) {
                        exempt.push({
                            p,
                            r: lang === 'en' ? 'Currently licensed' : lang === 'tc' ? 'ç›®å‰æŒç‰Œ' : 'ç›®å‰æŒç‰Œ',
                            type: 'full'
                        });
                    }
                    // Paper 1 - exempt for former licensees within 8 years
                    else if (p === '1' && formerLicense && yearsAbsent <= 8) {
                        const reason = yearsAbsent < 3
                            ? (lang === 'en' ? 'Former licensee <3 years' : lang === 'tc' ? '3å¹´å…§æ›¾æŒç‰Œ' : '3å¹´å†…æ›¾æŒç‰Œ')
                            : (lang === 'en' ? 'Former licensee â‰¤8 years' : lang === 'tc' ? '8å¹´å…§æ›¾æŒç‰Œ' : '8å¹´å†…æ›¾æŒç‰Œ');
                        exempt.push({ p, r: reason, type: yearsAbsent < 3 ? 'full' : 'reentrant' });
                    }
                    // Other LRP papers - check exemption result
                    else if (lrpExemptionResult.exempt) {
                        exempt.push({
                            p,
                            r: lrpExemptionResult.reason,
                            type: lrpExemptionResult.type || 'full',
                            conditions: lrpExemptionResult.conditions
                        });
                    }
                    // No exemption - paper required
                    else {
                        required.push({p, t: 'LRP'});
                    }
                });
            }

            // Academic eligibility check
            if (academicQual === 'none' && !currentLicense) {
                eligibility.ok = false;
                eligibility.reasons.push(lang === 'en' ? 'Minimum academic qualification required.' : lang === 'tc' ? 'éœ€è¦æœ€ä½å­¸æ­·è¦æ±‚ã€‚' : 'éœ€è¦æœ€ä½å­¦å†è¦æ±‚ã€‚');
            }

            // RO experience requirements check - these are HARD requirements
            if (role === 'RO') {
                if (industryExp6 < 3) {
                    eligibility.ok = false;
                    eligibility.reasons.push(lang === 'en'
                        ? `RO requires minimum 3 years relevant experience in past 6 years (you have: ${industryExp6} years)`
                        : lang === 'tc'
                        ? `è² è²¬äººå“¡å¿…é ˆå…·å‚™éå»6å¹´å…§è‡³å°‘3å¹´ç›¸é—œç¶“é©—ï¼ˆæ‚¨æœ‰ï¼š${industryExp6}å¹´ï¼‰`
                        : `è´Ÿè´£äººå‘˜å¿…é¡»å…·å¤‡è¿‡å»6å¹´å†…è‡³å°‘3å¹´ç›¸å…³ç»éªŒï¼ˆæ‚¨æœ‰ï¼š${industryExp6}å¹´ï¼‰`);
                }
                if (managementExp < 2) {
                    eligibility.ok = false;
                    eligibility.reasons.push(lang === 'en'
                        ? `RO requires minimum 2 years management experience (you have: ${managementExp} years)`
                        : lang === 'tc'
                        ? `è² è²¬äººå“¡å¿…é ˆå…·å‚™è‡³å°‘2å¹´ç®¡ç†ç¶“é©—ï¼ˆæ‚¨æœ‰ï¼š${managementExp}å¹´ï¼‰`
                        : `è´Ÿè´£äººå‘˜å¿…é¡»å…·å¤‡è‡³å°‘2å¹´ç®¡ç†ç»éªŒï¼ˆæ‚¨æœ‰ï¼š${managementExp}å¹´ï¼‰`);
                }
            }

            // ==========================================
            // SHOW RESULTS
            // ==========================================
            let html = '';
            const pn = paperNames[lang];

            if (raType === '7') {
                html += `<div class="result-box success"><h3>âœ“ ${t.result_eligible}</h3><p>${notes[0]}</p></div>`;
            } else {
                const statusClass = !eligibility.ok ? 'danger' : eligibility.warnings.length ? 'warning' : 'success';
                const statusIcon = !eligibility.ok ? 'âœ—' : eligibility.warnings.length ? 'âš ï¸' : 'âœ“';
                const statusTitle = !eligibility.ok ? t.result_not_eligible : eligibility.warnings.length ? t.result_warning : t.result_eligible;

                html += `<div class="result-box ${statusClass}"><h3>${statusIcon} ${statusTitle}</h3>`;
                if (eligibility.reasons.length) html += `<ul>${eligibility.reasons.map(r => `<li>${r}</li>`).join('')}</ul>`;
                if (eligibility.warnings.length) html += `<ul>${eligibility.warnings.map(w => `<li>${w}</li>`).join('')}</ul>`;
                html += '</div>';

                // Show required papers
                if (required.length) {
                    html += `<div class="card"><div class="card-header" style="background:#ffebee;"><h2>ğŸ“ ${t.papers_required}</h2></div><div class="card-body"><ul class="result-list">`;
                    required.forEach(r => html += `<li><span>${pn[r.p] || 'Paper '+r.p}</span><span class="badge badge-danger">${r.t}</span></li>`);
                    html += '</ul></div></div>';
                }

                // Show exempt papers with exemption type
                if (exempt.length) {
                    html += `<div class="card"><div class="card-header" style="background:#e8f5e9;"><h2>âœ“ ${t.papers_exempt}</h2></div><div class="card-body"><ul class="result-list">`;
                    exempt.forEach(e => {
                        const typeLabel = e.type === 'conditional' ? ` (${t.exempt_conditional})` :
                                          e.type === 'reentrant' ? ` (${t.exempt_reentrant})` : '';
                        html += `<li class="exempt"><span>${pn[e.p] || 'Paper '+e.p}</span><span class="badge badge-success">${e.r}${typeLabel}</span></li>`;
                    });
                    html += '</ul></div></div>';
                }

                // Show conditional exemption conditions
                if (conditionalExemptions.length > 0) {
                    html += `<div class="card" style="border-left: 4px solid var(--warning);"><div class="card-header" style="background:#fff8e1;"><h2>âš ï¸ ${t.conditions_title}</h2></div><div class="card-body">`;
                    conditionalExemptions.forEach(ce => {
                        html += `<div style="margin-bottom:15px;"><strong>${ce.type}: ${ce.reason}</strong><ul style="margin-top:8px;padding-left:20px;">`;
                        ce.conditions.forEach(c => html += `<li style="margin-bottom:5px;">${c}</li>`);
                        html += '</ul></div>';
                    });
                    html += '</div></div>';
                }

                // Show CPT hours if required
                if (cptHours > 0) {
                    html += `<div class="result-box warning"><h3>â° ${t.cpt_required}</h3><p style="font-size:2rem;font-weight:700;color:#ED1C24;">${cptHours} ${lang === 'en' ? 'hours' : 'å°æ™‚'}</p><p>${t.cpt_before}</p></div>`;
                }

                // Summary
                html += `<div class="card"><div class="card-header"><h2>ğŸ“Š ${t.summary}</h2></div><div class="card-body">
                    <p><strong>${t.papers_to_pass}</strong> <span style="color:${required.length ? '#dc3545' : '#28a745'};font-weight:700;">${required.length}</span></p>
                    <p><strong>${t.papers_exempt_count}</strong> <span style="color:#28a745;font-weight:700;">${exempt.length}</span></p>
                    ${cptHours ? `<p><strong>${lang === 'en' ? 'CPT Hours:' : 'CPTæ™‚æ•¸ï¼š'}</strong> <span style="color:#ffc107;font-weight:700;">${cptHours}</span></p>` : ''}
                </div></div>`;

                // Add product recommendations if there are required papers
                if (required.length > 0) {
                    html += generateProductRecommendations(required);
                }
            }

            // Always add SFC information
            html += generateSFCInfo();

            document.getElementById('resultsContent').innerHTML = html;
            document.querySelectorAll('.step').forEach(s => s.classList.remove('active'));
            document.getElementById('stepResults').classList.add('active');
            window.scrollTo(0, 0);
        }

        function restart() {
            document.querySelectorAll('input[type="radio"]').forEach(r => r.checked = r.defaultChecked);
            document.querySelectorAll('input[type="checkbox"]').forEach(c => c.checked = false);
            document.querySelectorAll('input[type="number"]').forEach(n => n.value = 0);
            document.getElementById('academicQual').value = 'none';
            document.getElementById('currentRAGroup').style.display = 'none';
            document.getElementById('yearsAbsentGroup').style.display = 'none';
            document.getElementById('formerRAGroup').style.display = 'none';
            // Reset license rows selected state
            document.querySelectorAll('.license-row').forEach(row => row.classList.remove('selected'));
            // Reset never attempted P1 visibility
            const neverP1Row = document.getElementById('neverAttemptedP1Row');
            if (neverP1Row) neverP1Row.style.display = 'none';
            // Reset conditional fields visibility
            const roFields = document.getElementById('roConditionalFields');
            const lrFields = document.getElementById('lrConditionalFields');
            if (roFields) roFields.style.display = 'none';
            if (lrFields) lrFields.style.display = 'none';
            document.querySelectorAll('.step').forEach(s => s.classList.remove('active'));
            document.getElementById('step1').classList.add('active');
            window.scrollTo(0, 0);
        }

        // Initialize conditional field visibility on page load
        document.addEventListener('DOMContentLoaded', function() {
            const roFields = document.getElementById('roConditionalFields');
            const lrFields = document.getElementById('lrConditionalFields');
            if (roFields) roFields.style.display = 'none';
            if (lrFields) lrFields.style.display = 'none';
        });
    </script>
</body>
</html>
<!-- v3 - Enhanced Exemption Logic -->
